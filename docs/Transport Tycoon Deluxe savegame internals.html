<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- saved from url=(0054)http://marcin.ttdpatch.net/sv1codec/TTD-locations.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="Author" content="Marcin Grzegorczyk">
<meta name="Description" content="Structure of Transport Tycoon Deluxe (TTD) savegame files">

<title>Transport Tycoon Deluxe savegame internals</title>

</head>
<body>

<p><small>
Hint: Although this document is 100% HTML 3.2, it uses nested tables rather heavily. If your browser cannot display it properly, you're probably better off viewing it as plain text, especially if you have a way to filter out all the HTML markup.
</small></p>


<h1>TTD savegame internals</h1>
<p>
This file documents many things I know about the structure of Transport Tycoon Deluxe (TTD) savegame files. In fact, my goal is to make this file as complete and accurate reference of TTD savegame structure as possible, for as long as I can maintain it.  You can rely on the information you find here :-)
</p>
<p>
<a href="http://www.ttdpatch.net/">TTDPatch</a> extensions up to version 2.0 are also documented, but often in less detail, and since TTDPatch is under continuous development, the list is likely to be incomplete the moment you read it. For an up-to-date reference, the best you can do is probably getting the <a href="http://www.ttdpatch.net/src/">TTDPatch source code</a> (also available at <a href="http://kufel.immt.pwr.wroc.pl/~mgrzegor/ttdpatch/">my TTDPatch site</a>) and browse the assembly files (<samp>*.asm</samp> and <samp>*.ah</samp>).
</p>
<p>
If you notice any errors, or have suggestions regarding this document, feel free to <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#e-mail">e-mail</a> me about it.
</p>
<p>
The original Transport Tycoon (TTO) uses a similar savegame format, but so far I have little information concerning the exact structure of uncompressed TTO savegames (see <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#compressed_vs_uncompressed">"Compressed vs. uncompressed"</a> below).
</p>


<h2>The basics</h2>
<p>
I  assume  that you, the reader, are familiar with basic concepts of savegame 
editing; if you're not, there are plenty of tutorials on the Web.
You should have a decent hex editor, too, but you probably know that already. 
(For Windows, a good one is frhed (Free Hex Editor). You can get it from
<a href="http://www.kibria.de/frhed.html">this site</a>.)
</p>

<h3>Conventions</h3>
<p>
Unless stated otherwise, a plain number with no prefix is assumed to be in the hexadecimal notation, except for bit numbers, which are in the decimal notation. A plain number prefixed with a plus (+) or minus (-) sign is in the decimal notation. Numbers with a fractional part, percentages and dates are also in decimal by default.
</p>
<p>
To further disambiguate between the decimal and hexadecimal notation, hexadecimal is typically marked by the use of a monospaced font, like this: <tt>1F</tt>, and/or the <tt>0x</tt> prefix, like this: 0x1F.
</p>
<p>
In fragments marked as "C notation", numbers are in the notation used in the C language (i.e. <tt>0x</tt> prefix means hexadecimal, <tt>0</tt> prefix means octal, otherwise it's decimal); monospaced font has no significance there. Sorry if it gets confusing, it's intuitive enough to me :-)
</p>
<p>
<a name="variable_sizes">
Variable sizes  are indicated with the following symbols:  <tt>B</tt>  -  byte,  <tt>W</tt>  -  word  (16-bit),  <tt>L</tt>  - 'long' word (32-bit; the standard term for the x86 architecture is 'doubleword', but <tt>B</tt> and <tt>D</tt> are visually not enough distinct for my taste).
<tt>B[2]</tt> means two bytes; a notation like <tt>[14][1E]</tt> means an array of 0x1E (or +30) structures, each 0x14 (or +20) bytes long.
</a>
Words and doublewords are stored in the 'little-endian' convention, with the least significant byte first, as usual on the x86 processor architecture.
</p>

<h3><a name="compressed_vs_uncompressed">Compressed vs. uncompressed</a></h3>
<p>
All known versions of Transport Tycoon save and load compressed savegames.  The format of a compressed savegame (a file with one of the following extensions: <samp>.SV0</samp>, <samp>.SV1</samp>, <samp>.SV2</samp>, <samp>.SS0</samp>, <samp>.SS1</samp>) is as follows:
</p>

<!-- format description table: TT savegame -->

<table cellpadding="3">
<tbody><tr><th align="center">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="2"></td></tr>
<tr><td align="left" valign="top" nowrap=""> TTO: +39 bytes &nbsp;&nbsp; <br> TTD: +47 bytes </td><td>
Title of the game.  A string of characters, terminated with a NUL unless they take up the entire title space.

</td></tr>
<tr><td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Title checksum.  This is calculated by adding up all bytes of the title field, rotating the (16-bit) value 1 bit to the left after each addition, then EXORing the resulting value with <tt>0xAAAA</tt>.

</td></tr>
<tr><td align="left" valign="top" nowrap="">variable</td><td>
The actual data, compressed with a variant of run-length encoding (RLE) scheme.  A string of chunks, each consisting of a leading code byte (the value of which is denoted as <var>c</var> here) followed by one byte if <var>c</var> is negative, otherwise by <var>c</var>+1 bytes.  The uncompressed data consist of:
<ul>
<li>
if <var>c</var> is nonnegative: the rest of the chunk, i.e. the following <code>(<var>c</var> + 1)</code> bytes;
</li>
<li>
if <var>c</var> is negative: the other byte of the chunk repeated <code>(-<var>c</var> + 1)</code> times.
</li>
</ul>

</td></tr>
<tr><td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
File checksum, calculated from <em>all</em> the preceding bytes of the file (including the title and the title checksum fields).  The file checksum is always at the end of the file.
<p>
The file checksum calculation starts with checksum equal to 0.  Each byte is added to the low 8 bits of the checksum; after each addition, the (32-bit) checksum is rotated 3 bits to the left.  Finally, the game format version (+105128 for TTO, +201100 for TTD) is added to the checksum.
</p>
<p>
File checksum is broken in games saved by the Windows version of TTD.  This is fixed in TTDPatch 1.8 and later if 'generalfixes' or 'win2k' switch is on.
</p>

</td></tr>
</tbody></table>

<p>
Title screen demonstration savegames (the <samp>TITLE.DAT</samp> files) use the same format, except that at the end of the file checksum calculation, the game format version is subtracted from the checksum, instead of being added to it.
</p>

<!-- end of format description table: TT savegame -->

<p>
To uncompress a savegame, use <a href="http://kufel.immt.pwr.wroc.pl/~mgrzegor/sv1tool/">SV1Codec</a>.  SV1Codec produces uncompressed savegames (a.k.a. 'big' files) with a <samp>.big</samp> extension by default.
</p>


<hr width="80%">
<p align="center">
<strong>
Note: All information below applies to <em>uncompressed</em> savegames.
</strong>
</p>
<hr width="80%">



<h3>Coordinate systems</h3>
<p>
Of various coordinate systems used in TTD, the three listed below appear in savegames.  In each of those, the north (top) corner of the map is the 'zero' of the coordinate system.
</p>
<dl>
<dt>Tile coordinates</dt>
<dd>
<p>
Also called <dfn>X offset</dfn> and <dfn>Y offset</dfn> in this document, these are most common and are used when it's only necessary to know the location of a <dfn>tile</dfn> (<i>square</i>, in TTD terms). The X coordinate grows from north to west, while the Y coordinate grows from north to east; a tile is the unit.
</p>
<p>
For a tile at the coordinates (X,Y), its <i>array index</i> (that is, the index into any of the landscape arrays) is <code>(0x100 * Y) + X</code>. For example, the array index of a tile located at (X=0x17, Y=0x23) is <tt>2317</tt>; therefore, data for this tile may be found at the offset <tt>2317</tt> from the beginning of an array of bytes (like the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape1">'L1' array</a>), or <tt>462E</tt> (which is <tt>2*0x2317</tt>) from the beginning of an array of words (like the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape3">'L3' array</a>). The array index of the tile at the north corner of the landscape is (obviously) <tt>0000</tt>, at the left (west) corner it's <tt>00FF</tt>, at the right (east) corner it's <tt>FF00</tt>, and at the bottom (south) corner tile it's, of course, <tt>FFFF</tt>. Note that the east, west and south corner tiles are empty -- they are a part of an invisible one-tile border at the bottom edges of the map. (See the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#Class7">description of Class 7</a> for more information.)
</p>
<p>
When an array index of a tile is stored in a word, the first byte contains the X offset and the second byte contains the Y offset. This form of storing tile coordinates is referred to as the <dfn>XY index</dfn> (or simply <dfn>XY</dfn>) of a tile.
</p>
</dd>
<dt>Precise coordinates</dt>
<dd>
<p>
'Precise' coordinates, also referred to as <dfn>X location</dfn> and <dfn>Y location</dfn> (not to be confused with data locations, i.e. offsets from the beginning of the uncompressed savegame) in this document, are used when it's necessary to know the location of an object (e.g. a vehicle) on the landscape with a finer resolution than an XY index provides. The system is the same as tile coordinates, except that a tile is 16 units long in both directions. Therefore, in order to convert from precise coordinates to tile coordinates one has to just shift both values 4 bits to the right, discarding the low-order bits.
</p>
<p>
To describe the location of a vehicle in full, a third coordinate (the <dfn>Z location</dfn>, or <dfn>altitude</dfn>) is needed as well. One height level equals 8 units of altitude.
</p>
</dd>
<dt>Pixel coordinates</dt>
<dd>
<p>
To speed up the display of things, TTD employs the concept of <em>absolute</em> pixel coordinates. These are calculated from the precise coordinates (X,Y,Z) as follows:
</p>
<p align="center">
<code> pixel_X = 2*(Y - X) <br> pixel_Y = Y + X - Z </code>
</p>
<p>
Note that the mapping of these coordinates into screen coordinates is affected by such things as view window or zoom level.
</p>
</dd></dl>

<h3>Simulation engine basics</h3>
<p>
All simulation processing in TTD is synchronous. The basic unit of time, one <dfn>tick</dfn>, is approximately +27 milliseconds long (though it may be more on a slow machine). A day in the TTD world is about +74 (precisely <tt>0x10000/0x375</tt>, see the description of the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_DayPartCounter">location <tt>00002</tt></a> below) ticks long.
</p>


<!-- ************************* Data layout ************************* -->


<h2>Data layout</h2>
<p>
An uncompressed savegame is basically a dump of all the parts of TTD memory required to restore the full state of the game. (In the Windows version of TTD pointers are translated before saving to keep the format compatible.)
</p>
<p>
<em>Note:</em> The layout is not fully known, so there are holes between data locations.  Always refer to the size of a variable, structure or array to determine where it ends.
</p>

<table>
<tbody><tr><th align="left">Location</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_Date"><tt> 00000&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Date in days since 1920-01-01

</td></tr>
<tr><td valign="top" nowrap=""><a name="_DayPartCounter"><tt> 00002 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
'Fractional part' of the date. On each tick, <tt>0x375</tt> is added to this field; when it overflows, the date is incremented.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_TextEffectArray"><tt> 00004 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [14][1E] </tt></td><td>
Array of <dfn>text effects</dfn>, i.e. the rising cost/income signs. +30 entries, the structure of each entry is as follows:
<!--
each <tt>14</tt> bytes long in total, and that the first word of each entry contains the .
-->

</td></tr>
<tr><td colspan="3">

<!-- structure description table: text effect array -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td><table>
<tbody><tr><th align="left">Offset</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="texteffect.text"><tt> 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td>
Text ID to display (<tt>0801</tt> for cost, <tt>0803</tt> for income), or <tt>FFFF</tt> in case of an empty slot (i.e. an unused entry).<br><small> Note: At the intermediate <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_savemainviewzoom">zoom level</a>, TTD uses text ID equal to this field minus one.</small>

</td></tr>
<tr><td valign="top" nowrap=""><a name="texteffect.pos"><tt> 02 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[4] </tt></td><td>
Current position and size of the text. 4 absolute pixel coordinates, in the following order: left, right, top, bottom. The top and bottom coordinates are decremented on each tick.

</td></tr>
<tr><td valign="top" nowrap=""><a name="texteffect.expcountdown"><tt> 0A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Expiration counter. On each tick, TTD subtracts 8 from this field; when it wraps around at zero the text effect is deleted from the array (by setting the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#texteffect.text">word at <tt>00</tt></a> to <tt>FFFF</tt>). The initial value is <tt>250</tt>.

</td></tr>
<tr><td valign="top" nowrap=""><a name="texteffect.textrefstack"><tt> 0C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [8] </tt></td><td>
Text reference stack, the exact format depends on the text ID. For the cost/income signs, the first doubleword contains the amount to display, in British pounds.

</td></tr>
</tbody></table></td></tr></tbody></table>

<!-- end of structure description table: text effect array -->

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_randomseed"><tt> 0025C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L[2] </tt></td><td> 
Random number generator's seed

</td></tr>
<tr><td valign="top" nowrap=""><a name="_TownArray"><tt> 00264 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [5E][46] </tt></td><td> 
Town array (+70 entries, which defines the maximum number of towns possible). Locations within each entry follow:

</td></tr>
<tr><td colspan="3">

<!-- structure description table: town array -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td><table>
<tbody><tr><th align="left">Offset</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="town.XY"><tt> 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td> 
XY of the town, <tt>00</tt> if an empty slot

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.population"><tt> 02 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Population

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.name"><tt> 04 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Town name (text ID)

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.nameparts"><tt> 06 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td> 
Town name parts (for randomly-generated names), bitcoded (no exact information yet)

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.expansioncountdown"><tt> 0A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Countdown to a town expansion attempt. If bit 0 of the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#town.flags">flags at <tt>12</tt></a> is set, then every +70 ticks if this counter is nonzero it is decremented, if it's zero an attempt to expand the town is taken.

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.displayidx"><tt> 0B </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Index of the town in alphabetic ordering

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.namepos"><tt> 0C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[2] </tt></td><td> 
X and Y position of the town name in absolute pixel coordinates

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.namewidth"><tt> 10 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Width of the town name in pixels, normal font

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.namewidthsmall"><tt> 11 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Width of the town name in pixels, small font

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.flags"><tt> 12 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
<table>
<tbody><tr><td align="left" valign="top" nowrap="">bit 0 set:</td><td align="left">town can expand (updated monthly)</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 1 set:</td><td align="left">town has a church</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 2 set:</td><td align="left">town has a stadium</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.zones"><tt> 14 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[5] </tt></td><td> 
Squares of radii of 5 town zones. The first zone is where station activity contributes to growth of the town, other zones determine where roads are paved or have trees or streetlights. Most types of town buildings have restrictions as to which zones they may be built in. Zone radii are based on the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#town.buildingcount">total number of buildings in town</a>. There's no point in changing them, as they're frequently updated by TTD.

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.LAratings"><tt> 1E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[8] </tt></td><td> 
Local Authority ratings for each company:
<table>
<tbody><tr><td align="right" valign="top">-1000</td><td align="center" valign="top">..</td><td align="left" valign="top">-400</td><td align="left">Appalling</td></tr>
<tr><td align="right" valign="top">-399</td><td align="center" valign="top">..</td><td align="left" valign="top">-200</td><td align="left">Very Poor</td></tr>
<tr><td align="right" valign="top">-199</td><td align="center" valign="top">..</td><td align="left" valign="top">0</td><td align="left">Poor</td></tr>
<tr><td align="right" valign="top">1</td><td align="center" valign="top">..</td><td align="left" valign="top">+200</td><td align="left">Mediocre</td></tr>
<tr><td align="right" valign="top">+201</td><td align="center" valign="top">..</td><td align="left" valign="top">+400</td><td align="left">Good</td></tr>
<tr><td align="right" valign="top">+401</td><td align="center" valign="top">..</td><td align="left" valign="top">+600</td><td align="left">Very Good</td></tr>
<tr><td align="right" valign="top">+601</td><td align="center" valign="top">..</td><td align="left" valign="top">+800</td><td align="left">Excellent</td></tr>
<tr><td align="right" valign="top">+801</td><td align="center" valign="top">..</td><td align="left" valign="top">+1000</td><td align="left">Outstanding</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.companiesrated"><tt> 2E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td> 
Bit map of companies that do have a Local Authority rating.
<br>
<small>
[TTDPatch] Since only the lowest byte is actually used, older TTDPatch versions used the rest to store the information about a failed bribe attempt. Since TTDPatch 1.9.1 alpha 43.1 experimental, this information is stored in the extended town data in the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#extrachunks">extra chunks</a>.
</small>

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.companieshavestatue"><tt> 32 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td> 
Bit map of companies that have a statue in this town

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.buildingcount"><tt> 36 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Number of buildings<br> (Note: this value may be higher than the actual number of buildings due to a bug in TTD, fixable via TTDPatch since 1.9.1 alpha 25)

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.expansionrate"><tt> 39 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Town expansion inverse rate. If a town expansion attempt succeeds, the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#town.expansioncountdown">counter at <tt>0A</tt></a> is set to this value.

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.maxpassthismonth"><tt> 3A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Maximum number of passengers that could be transported so far this month

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.maxmailthismonth"><tt> 3C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Maximum number of bags of mail that could be transported so far this month

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.actpassthismonth"><tt> 3E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Actual number of passengers transported so far this month

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.actmailthismonth"><tt> 40 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Actual number of bags of mail transported so far this month

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.maxpasslastmonth"><tt> 42 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Maximum number of passengers that could be transported last month

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.maxmaillastmonth"><tt> 44 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Maximum number of bags of mail that could be transported last month

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.actpasslastmonth"><tt> 46 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Actual number of passengers transported last month

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.actmaillastmonth"><tt> 48 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Actual number of bags of mail transported last month

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.fractpasslastmonth"><tt> 4A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Fraction of passengers transported last month (<tt>FF</tt> means 100%)

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.fractmaillastmonth"><tt> 4B </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Fraction of mail transported last month (<tt>FF</tt> means 100%)

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.foodthismonth"><tt> 4C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Units of food (fizzy drinks in toyland) delivered to this town so far this month

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.waterthismonth"><tt> 4E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Units of water delivered to this town so far this month <br>
(Note: in climates other than sub-tropical this is a bogus counter; it counts steel, paper, or bubbles)

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.foodlastmonth"><tt> 50 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Units of food (fizzy drinks in toyland) delivered to this town last month

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.waterlastmonth"><tt> 52 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Units of water delivered to this town last month (see the note under <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#town.waterthismonth">field <tt>4E</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.roadworks"><tt> 54 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
If nonzero, road works are active in this town and will stop after this many months

</td></tr>
<tr><td valign="top" nowrap=""><a name="town.buildingfund"><tt> 55 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
If nonzero, a building fund is active in this town and will expire after this many months

</td></tr>

<!-- end of structure description table: town array -->

</tbody></table></td></tr></tbody></table>
</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_ScheduleHeap"><tt> 01C18 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[1388] </tt></td><td> 
A heap of schedule strings. Each schedule string consists of word-sized orders and is terminated with a zero word. For the meaning of bit fields in an order, consult the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.currentorder">vehicle structure field <tt>0A</tt></a>. Note that only type 1 orders are allowed in a schedule (TTDPatch allows type 2 as well). If a station or depot is deleted permanently, all orders that refer to it are reset to <tt>0100</tt>.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_AnimatedTilesList"><tt> 04328 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[100] </tt></td><td> 
A list of XY indices of tiles on which some animation is taking place. <tt>0000</tt> indicates the end of list if the space is not full.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_freescheduleheapptr"><tt> 04528 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td> 
Pointer to the free space at the end of the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_ScheduleHeap">schedule strings heap</a>.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_DepotArray"><tt> 0452C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [6][FF] </tt></td><td> 
Depot array (+255 entries), the structure of each entry is as follows:

</td></tr>
<tr><td colspan="3">

<!-- structure description table: depot array -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td><table>
<tbody><tr><th align="left">Offset</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="depot.XY"><tt> 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td> 
XY of the depot, <tt>00</tt> if an empty slot

</td></tr>
<tr><td valign="top" nowrap=""><a name="depot.townptr"><tt> 02 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td> 
Pointer to the town the depot is associated with

</td></tr>
</tbody></table></td></tr></tbody></table>

<!-- end of structure description table: depot array -->

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_nexttownforperiodicprocptr"><tt> 04B26 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td> 
Pointer to an entry in the town array that will be subject to periodic town processing on the next tick. After that processing, this pointer will point at the next entry in the town array (or at the first one if it previously pointed at the last one), thus towns' periodic processing is done in a round-robin fashion, with the full cycle taking +70 ticks.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_paletteanimationcounter"><tt> 04B2A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Incremented on every tick of the ~3.3ms system timer when the game is running, this counter is used to animate the palette.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_landscapecode"><tt> 04B2C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Landscape code, generated from the current time when a new game is created or the scenario editor is started.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargoagecountdown"><tt> 04B2E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Decremented on every tick, when wraps around at zero the 'age' field of all cargo in vehicles is incremented, then this counter is reset to <tt>B8</tt>.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_animationtickcounter"><tt> 04B30 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
Incremented on every tick, this counter is used to time various animations.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_nexttileforperiodicprocptr"><tt> 04B32 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
XY index of the next tile to be processed by the periodic tile processing routine (which processes 256 tiles on each tick).

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td colspan="3" align="center">
Locations <tt>4B34</tt>..<tt>4C5A</tt> are various base costs subject to inflation. The notation <tt>L+W</tt> indicates that there is a 32-bit integer part followed by a 16-bit fractional part. The currency unit is a British pound.
</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.misc"><tt> 04B34 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base for various cost calculations, among others the property maintenance costs.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildtrack"><tt> 04B3A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of building a piece of track

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildroad"><tt> 04B40 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of building a piece of road

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.placesignal"><tt> 04B46 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of placing signals

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildbridgeunit"><tt> 04B4C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base unit cost of bridge building.  The actual cost of building a bridge is a product of: <ul compact=""><li>this value, </li><li>a function of bridge length, </li><li>a function of bridge type.</li></ul>

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildraildepot"><tt> 04B52 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of building a railway depot

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildroaddepot"><tt> 04B58 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of building a road depot

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildshipdepot"><tt> 04B5E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of building a ship depot

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildtunnelunit"><tt> 04B64 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base unit cost of tunnel building

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildplatformunit"><tt> 04B6A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of building a piece of platform at a railway station

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildplatformfixed"><tt> 04B70 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The additional cost of building each one platform at a railway station

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildairportunit"><tt> 04B76 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of building one tile of airport or heliport

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildbusstation"><tt> 04B7C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of building a bus station

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.buildlorryarea"><tt> 04B82 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of building a lorry loading area

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.builddock"><tt> 04B88 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of building a dock

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.loco"><tt> 04B8E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base cost of a new rail engine

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.waggon"><tt> 04B94 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base cost of a new wagon

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.aircraft"><tt> 04B9A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base cost of a new aircraft

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.roadveh"><tt> 04BA0 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base cost of a new road vehicle

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.ship"><tt> 04BA6 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base cost of a new ship

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.tree"><tt> 04BAC </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of planting a tree

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.raiselower"><tt> 04BB2 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of raising or lowering one point of the landscape

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.cleargrass"><tt> 04BB8 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of clearing a tile of grass

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.clearroughland"><tt> 04BBE </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of clearing a tile of rough land

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.clearrocks"><tt> 04BC4 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of clearing a tile of rocks

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.clearfields"><tt> 04BCA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of clearing a tile of fields

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removetree"><tt> 04BD0 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing one tree

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removetrack"><tt> 04BD6 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The (usually negative) cost of removing a piece of track

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removesignal"><tt> 04BDC </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing signals

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removebridgetile"><tt> 04BE2 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing a tile of bridge

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removeraildepot"><tt> 04BE8 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing a railway depot

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removeroaddepot"><tt> 04BEE </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing a road depot

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removeshipdepot"><tt> 04BF4 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing a ship depot

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removetunneltile"><tt> 04BFA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The unit cost of removing a tunnel

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.clearwater"><tt> 04C00 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of clearing a tile of water

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removeplatformunit"><tt> 04C06 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing one tile of railway station

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removeairportunit"><tt> 04C0C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing one tile of airport or heliport

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removebusstation"><tt> 04C12 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing a bus station

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removelorryarea"><tt> 04C18 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing a lorry loading area

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removedock"><tt> 04C1E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing a dock

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removehouse"><tt> 04C24 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base cost of removing a town building

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.removeroad"><tt> 04C2A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The cost of removing a piece of road

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.steamengrun"><tt> 04C30 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base running cost of steam engines

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.dieselengrun"><tt> 04C36 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base running cost of diesel engines

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.electricengrun"><tt> 04C3C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base running cost of electric engines

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.aircraftrun"><tt> 04C42 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base running cost of aircraft

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.roadvehrun"><tt> 04C48 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base running cost of road vehicles

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.shiprun"><tt> 04C4E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base running cost of ships

</td></tr>
<tr><td valign="top" nowrap=""><a name="_Costs.funding"><tt> 04C54 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L+W </tt></td><td> 
The base cost for funding Local Authority actions and new industries

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargopricefactors"><tt> 04C5A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [8][C] </tt></td><td> 
Delivery payment factors for all +12 types of cargo.  Each factor consists of a doubleword integer part, a word fractional part, and an unused 'filler' word.

<!-- Cargo payment calculation:
if (cargo!=valuables && dist<10) dist=0;
timefactor=255; if ((time-=threshold1)>0) timefactor-=time; if ((time-=threshold2)>0) timefactor-=time; if (timefactor<31) timefactor=31;
return ((((dist>>1)*timefactor*amount)>>7)*paymentfactor[cargotype])>>13;
-->

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_landscape1"><tt> 04CBA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[10000] </tt></td><td> 
The 'L1' landscape array. For <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape4">landscape classes</a> other than <tt>3</tt>, <tt>7</tt> and <tt>8</tt>, it holds the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of a tile. See the section <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#Landscape">"Landscape"</a> for details.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_landscape2"><tt> 14CBA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[10000] </tt></td><td> 
The 'L2' landscape array. The meaning depends on the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape4">class</a> and type of a particular tile. See the section <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#Landscape">"Landscape"</a> for details.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_landscape3"><tt> 24CBA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[10000] </tt></td><td> 
The 'L3' landscape array. The meaning depends on the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape4">class</a> and type of a particular tile. See the section <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#Landscape">"Landscape"</a> for details.
<p>
TTDPatch saves some of its special data in this array, mostly at the end, in entries corresponding to the class <tt>7</tt> tiles that form the invisible border at the southeastern edge of the map (these bytes are initialized to zero by TTD and normally not changeable).
</p>
<p>
TTDPatch versions up to 2.0 beta 5 also stored data at the beginning of this array. Since those locations (corresponding to the northwestern edge tiles, which normally hold water in TTD) were proven to be unsafe (they can be overwritten in TTD), after 2.0 beta 5 some of the TTDPatch data have been relocated. The formats of the special data before and after the relocation are referred to as the 'old' and 'new' format, respectively.
</p>
<p>
The following table lists all the special locations defined by versions of TTDPatch up to 2.0. Locations described as "relocated" are from the old format. The addresses in the left column are offsets from the beginning of the file, not from the beginning of the 'L3' array.
</p>
</td></tr>
<tr><td colspan="3">

<!-- TTDPatch L3 data -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;</tt></td><td><table>
<caption>TTDPatch special data in the L3 array</caption>
<tbody><tr><th align="left">Location</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.vehfactor"><tt> 24CBA&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td>
<a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_VehicleArray">Vehicle array</a> multiplier, equal to the setting of TTDPatch's 'morevehicles' switch, except that <tt>00</tt> is interpreted as 1 (the standard TTD format) and <tt>01</tt> is interpreted as 2.

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatchold.extrachunks"><tt> 24CBC </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
(relocated to <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatch.extrachunks"><tt>44CB8</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatchold.chtused"><tt> 24CBE </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
(relocated to <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatch.chtused"><tt>44AC0</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatchold.orgpl1"><tt> 24CC2 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
(relocated to <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatch.orgpl1"><tt>44ACE</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatchold.orgpl2"><tt> 24CC3 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
(relocated to <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatch.orgpl2"><tt>44ACF</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatchold.yearsadd"><tt> 24CC4 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
(relocated to <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatch.yearsadd"><tt>44ACC</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatchold.daysadd"><tt> 24CC6 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
(relocated to <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatch.daysadd"><tt>44AC8</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatchold.realcurrency"><tt> 24CCA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
(relocated to <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatch.realcurrency"><tt>44ABF</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.lastremoveddepotidx"><tt> 44ABA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Index of the last removed depot (used when 'gotodepot' is on, to make it possible to move a depot without messing up all schedules that contain an order referencing that depot)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.lastremoveddepottype"><tt> 44ABB </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
<a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.class">Vehicle class</a> associated with the last removed depot, or <tt>00</tt> if the last removed depot information is not valid

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.lastremoveddepotXY"><tt> 44ABC </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
XY of the last removed depot

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.lastrailclass"><tt> 44ABE </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Last railway class selected in the construction menu (0..2)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.realcurrency"><tt> 44ABF </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Actual currency used when the 'morecurrencies' option is active, plus 1 (<tt>00</tt> if not valid; in the old format at <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatchold.realcurrency"><tt>24CCA</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.chtused"><tt> 44AC0 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L[2] </tt></td><td>
Bit map of sign cheats used in this game (in the old format at <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatchold.chtused"><tt>24CBE</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.daysadd"><tt> 44AC8 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Day offset, i.e. number of days 'pushed back' to keep the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_Date">main date</a> below year +2071 (in the old format at <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatchold.daysadd"><tt>24CC6</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.yearsadd"><tt> 44ACC </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Year offset above +2070 if the 'eternalgame' option is used (in the old format at <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatchold.yearsadd"><tt>24CC4</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.orgpl1"><tt> 44ACE </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Original company of player 1, used for temporary management of other companies (in the old format at <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatchold.orgpl1"><tt>24CC2</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.orgpl2"><tt> 44ACF </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Original company of player 2, used for temporary management of other companies (in the old format at <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatchold.orgpl2"><tt>24CC3</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.ttdxeditor"><tt> 44BBA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[4] </tt></td><td>
(Reserved for TTDX Editor, not used by TTDPatch)

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.magic"><tt> 44CB4 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[4] </tt></td><td>
If this field contains the byte string <tt>54 54 44 70</tt> (which is "<tt>TTDp</tt>" in ASCII), the savegame uses the new TTDPatch special data format.

</td></tr>
<tr><td valign="top" nowrap=""><a name="ttdpatch.extrachunks"><tt> 44CB8 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Number of the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#extrachunks">extra chunks</a> at the end of the savegame (in the old format at <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatchold.extrachunks"><tt>24CBC</tt></a>)

</td></tr>
</tbody></table>
<p align="center"><small>
- End of TTDPatch special data in the L3 array -
</small></p>
</td></tr></tbody></table>

<!-- end of TTDPatch L3 data -->

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_DesertMap"><tt> 44CBA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [4000] </tt></td><td> 
The map of rainforest/desert areas. Consists of <tt>10000</tt> 2-bit entries (one for each tile); within a byte, the entries are allocated from the least to the most significant bits. The value of each entry means: <tt>0</tt> - normal area, <tt>1</tt> - desert area, <tt>2</tt> - rainforest area.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_StationArray"><tt> 48CBA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [8E][FA] </tt></td><td> 
Station array (+250 entries), locations within each entry follow:

</td></tr>
<tr><td colspan="3">

<!-- structure description table: station array -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td><table>
<tbody><tr><th align="left">Offset</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="station.XY"><tt> 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td>
XY of the station's origin, <tt>00</tt> if an empty slot

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.townptr"><tt> 02 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Pointer to the town the station is associated with

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.busXY"><tt> 06 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
XY of the bus station, <tt>00</tt> if not present

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.lorryXY"><tt> 08 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
XY of the lorry loading area, <tt>00</tt> if not present

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.railXY"><tt> 0A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
XY of the north corner of the railway station, <tt>00</tt> if not present

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.airportXY"><tt> 0C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
XY of the north corner of the airport/heliport, <tt>00</tt> if not present

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.dockXY"><tt> 0E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
XY of the dock (the land part), <tt>00</tt> if not present

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.platforms"><tt> 10 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Bits 0..2: number of tracks; bits 3..5: length of the railway station

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.ordinal"><tt> 11 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Index of the station in alphabetic ordering

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.namewidth"><tt> 12 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Width of the station name in pixels, normal font

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.namewidthsmall"><tt> 13 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Width of the station name in pixels, small font

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.name"><tt> 14 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Station name (text ID)

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.namepos"><tt> 16 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[2] </tt></td><td>
X and Y position of the station name in absolute pixel coordinates

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.flags"><tt> 1A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Station flags:
<table>
<tbody><tr><td align="left" valign="top" nowrap="">bit 0 set:</td><td align="left">all facilities of the station have been removed (i.e. the station is a 'grey sign' only)</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 1 set:</td><td align="left">first train has already arrived at the station</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 2 set:</td><td align="left">first bus has already arrived at the station</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 3 set:</td><td align="left">first lorry has already arrived at the station</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 4 set:</td><td align="left">first aircraft has already arrived at the station</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 5 set:</td><td align="left">first ship has already arrived at the station</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 6 set:</td><td align="left">station is a waypoint, i.e. does not catch cargo produced nearby (also ships don't stop there)</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.cargos"><tt> 1C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [8][C] </tt></td><td>
Cargo information. +12 structures, one for each cargo type, as follows:

<!-- substructure description table: station cargos -->

<table>
<tbody><tr><th align="left">Offset&nbsp;</th><th align="left">Size&nbsp;</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><tt> 0 </tt></td><td align="left" valign="top" nowrap=""><tt> W </tt></td><td> 
<table>
<tbody><tr><td align="left" valign="top" nowrap="">Bits 0..11:</td><td align="left">the amount of this cargo type at the station (maximum <tt>FFF</tt>)</td></tr>
<tr><td align="left" valign="top" nowrap="">Bits 12..15:</td><td align="left">total acceptance of this cargo type within the station's catchment area, in 1/8 units (so if the most significant bit is set the station accepts this cargo type), limited from above to <tt>F</tt>; updated periodically</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><tt> 2 </tt></td><td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Time since this cargo type was last picked up from this station, in +185 ticks (~2.5 days) units

</td></tr>
<tr><td valign="top" nowrap=""><tt> 3 </tt></td><td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Transport rating of this cargo type:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt> .. <tt>1F</tt>&nbsp; </td><td align="left">Appalling</td></tr>
<tr><td nowrap="" valign="top"><tt>20</tt> .. <tt>3F</tt>&nbsp; </td><td align="left">Very Poor</td></tr>
<tr><td nowrap="" valign="top"><tt>40</tt> .. <tt>5F</tt>&nbsp; </td><td align="left">Poor</td></tr>
<tr><td nowrap="" valign="top"><tt>60</tt> .. <tt>7F</tt>&nbsp; </td><td align="left">Mediocre</td></tr>
<tr><td nowrap="" valign="top"><tt>80</tt> .. <tt>9F</tt>&nbsp; </td><td align="left">Good</td></tr>
<tr><td nowrap="" valign="top"><tt>A0</tt> .. <tt>BF</tt>&nbsp; </td><td align="left">Very Good</td></tr>
<tr><td nowrap="" valign="top"><tt>C0</tt> .. <tt>DF</tt>&nbsp; </td><td align="left">Excellent</td></tr>
<tr><td nowrap="" valign="top"><tt>E0</tt> .. <tt>FF</tt>&nbsp; </td><td align="left">Outstanding</td></tr>
</tbody></table>
(<var>value</var> * 101.0) / 256.0 gives the rating in percent.

</td></tr>
<tr><td valign="top" nowrap=""><tt> 4 </tt></td><td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Source of cargo (station index); if <tt>FF</tt> then this cargo type has not been rated yet at this station

</td></tr>
<tr><td valign="top" nowrap=""><tt> 5 </tt></td><td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Time en-route, in +185 ticks (~2.5 days) units

</td></tr>
<tr><td valign="top" nowrap=""><tt> 6 </tt></td><td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Maximum speed of the last vehicle that picked up this cargo type, as in the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.maxspeed">vehicle structure field <tt>18</tt></a> (halved if it was a road vehicle; limited from above to <tt>FF</tt>)

</td></tr>
<tr><td valign="top" nowrap=""><tt> 7 </tt></td><td align="left" valign="top" nowrap=""><tt> B </tt></td><td> 
Age of the last vehicle that picked up this cargo type (actually, difference between the year the vehicle had been built and the year the cargo was picked up)

</td></tr>
</tbody></table>

<!-- end of substructure description table: station cargos -->

<a name="CargoType">The order of cargo types</a> is:

<!-- enumeration table: cargo types -->

<table>
<tbody><tr><th rowspan="2" align="left" valign="middle">Type&nbsp;</th><th colspan="4" align="center"><a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_climate">Climate</a></th></tr>
                     <tr><th align="left">Temperate&nbsp; </th><th align="left">Sub-arctic&nbsp;</th><th align="left">Sub-tropical&nbsp;</th><th align="left">Toyland&nbsp;   </th></tr>
<tr><td><tt> 0 </tt></td><td align="left">Passengers&nbsp;</td><td align="left">Passengers&nbsp;</td><td align="left">Passengers&nbsp;  </td><td align="left">Passengers&nbsp;</td></tr>
<tr><td><tt> 1 </tt></td><td align="left">Coal&nbsp;      </td><td align="left">Coal&nbsp;      </td><td align="left">Rubber&nbsp;      </td><td align="left">Sugar&nbsp;     </td></tr>
<tr><td><tt> 2 </tt></td><td align="left">Mail&nbsp;      </td><td align="left">Mail&nbsp;      </td><td align="left">Mail&nbsp;        </td><td align="left">Mail&nbsp;      </td></tr>
<tr><td><tt> 3 </tt></td><td align="left">Oil&nbsp;       </td><td align="left">Oil&nbsp;       </td><td align="left">Oil&nbsp;         </td><td align="left">Toys&nbsp;      </td></tr>
<tr><td><tt> 4 </tt></td><td align="left">Livestock&nbsp; </td><td align="left">Livestock&nbsp; </td><td align="left">Fruit&nbsp;       </td><td align="left">Batteries&nbsp; </td></tr>
<tr><td><tt> 5 </tt></td><td align="left">Goods&nbsp;     </td><td align="left">Goods&nbsp;     </td><td align="left">Goods&nbsp;       </td><td align="left">Sweets (Candy)  </td></tr>
<tr><td><tt> 6 </tt></td><td align="left">Grain&nbsp;     </td><td align="left">Wheat&nbsp;     </td><td align="left">Maize&nbsp;       </td><td align="left">Toffee&nbsp;    </td></tr>
<tr><td><tt> 7 </tt></td><td align="left">Wood&nbsp;      </td><td align="left">Wood&nbsp;      </td><td align="left">Wood&nbsp;        </td><td align="left">Cola&nbsp;      </td></tr>
<tr><td><tt> 8 </tt></td><td align="left">Iron Ore        </td><td align="left">                </td><td align="left">Copper Ore        </td><td align="left">Candyfloss (Cotton Candy)</td></tr>
<tr><td><tt> 9 </tt></td><td align="left">Steel&nbsp;     </td><td align="left">Paper&nbsp;     </td><td align="left">Water&nbsp;       </td><td align="left">Bubbles&nbsp;   </td></tr>
<tr><td><tt> A </tt></td><td align="left">Valuables&nbsp; </td><td align="left">Gold&nbsp;      </td><td align="left">Diamonds&nbsp;    </td><td align="left">Plastic&nbsp;   </td></tr>
<tr><td><tt> B </tt></td><td align="left">                </td><td align="left">Food&nbsp;      </td><td align="left">Food&nbsp;        </td><td align="left">Fizzy Drinks    </td></tr>
</tbody></table>

<!-- end of enumeration table: cargo types -->

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.timesincecargoload"><tt> 7C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Time since the last cargo load operation at this station, in +185 ticks (~2.5 days) units

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.timesincecargounload"><tt> 7D </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Time since the last cargo unload operation at this station, in +185 ticks (~2.5 days) units

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.updatecounter"><tt> 7E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
If bit 0 of the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#station.flags">field <tt>1A</tt></a> is clear, this field is incremented on every tick; when it reaches <tt>B9</tt> it is reset to zero and the station cargo information is updated. <br>
If bit 0 of the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#station.flags">field <tt>1A</tt></a> is set, this field is incremented every +250 ticks (see <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_nextstationforperiodicproc">the variable at <tt>770FA</tt></a>); when it reaches <tt>08</tt> the station is deleted permanently.

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.owner"><tt> 7F </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
<a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">Owner</a> of the station

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.facilities"><tt> 80 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
A bit map of station components, bit set = facility present:
<table>
<tbody><tr><td align="left" valign="top" nowrap="">bit 0:</td><td align="left">railway station </td></tr>
<tr><td align="left" valign="top" nowrap="">bit 1:</td><td align="left">lorry loading area </td></tr>
<tr><td align="left" valign="top" nowrap="">bit 2:</td><td align="left">bus station </td></tr>
<tr><td align="left" valign="top" nowrap="">bit 3:</td><td align="left">airport or heliport </td></tr>
<tr><td align="left" valign="top" nowrap="">bit 4:</td><td align="left">dock </td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.airporttype"><tt> 81 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Type of the airport, if any: <tt>0</tt> - small airport, <tt>1</tt> - large airport, <tt>2</tt> - heliport, <tt>3</tt> - oil rig

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.lorrystat"><tt> 82 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Status of the lorry loading area:<br>
<table>
<tbody><tr><td align="left" valign="top" nowrap="">bit 0 set:</td><td align="left">bay 1 free </td></tr>
<tr><td align="left" valign="top" nowrap="">bit 1 set:</td><td align="left">bay 2 free </td></tr>
<tr><td align="left" valign="top" nowrap="">bit 7 set:</td><td align="left">busy</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.busstat"><tt> 83 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Status of the bus station, see <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#station.lorrystat">field <tt>82</tt></a>

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.exclusive"><tt> 84 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
If nonzero, the station does not catch any cargo (due to exclusive transport rights having been bought in the area); the value is the number of months left for this effect to expire

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.airportstat"><tt> 86 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Status of the airport:
<table>
<tbody><tr><td align="left" valign="top" nowrap="">bit 0:</td><td align="left"> set if pad 1 occupied</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 1:</td><td align="left"> set if pad 2 occupied</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 2:</td><td align="left"> set if pad 3 occupied (always set for small airports)</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 6:</td><td align="left"> set for heliports</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 7:</td><td align="left"> set if airport busy</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 8:</td><td align="left"> set for large airports</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 9:</td><td align="left"> (large airports only) set if out way busy</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 10:</td><td align="left"> (large airports only) set if in way busy</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 11:</td><td align="left"> (large airports only) set if runway busy</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="station.lastvehicle"><tt> 88 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Index of the last vehicle that visited this station

</td></tr>
</tbody></table></td></tr></tbody></table>

<!-- end of structure description table: station array -->

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_IndustryArray"><tt> 51766 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [36][5A] </tt></td><td> 
Industry array (+90 entries), locations within each entry follow:

</td></tr>
<tr><td colspan="3">

<!-- structure description table: industry array -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td><table>
<tbody><tr><th align="left">Offset</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="industry.XY"><tt> 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td>
XY of the north corner of the industry, <tt>00</tt> if an empty slot

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.townptr"><tt> 02 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Pointer to the town the industry is associated with

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.dimensions"><tt> 06 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
XY dimensions of the industry

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.producedcargos"><tt> 08 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[2] </tt></td><td>
Types of cargo produced (-1 if N/A)

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.amountswaiting"><tt> 0A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[2] </tt></td><td>
Amounts of cargo waiting to be distributed to nearby stations

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.productionrates"><tt> 0E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[2] </tt></td><td>
Production rates (applies only to primary industries)

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.cargosaccepted"><tt> 10 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[3] </tt></td><td>
Types of cargo accepted (-1 if N/A)

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.prodmultiplier"><tt> 13 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Production multiplier, always either <tt>00</tt> (which means the industry has announced imminent closure) or an integer power of 2. <tt>10</tt> is the default, <tt>04</tt> is the minimum, <tt>80</tt> is the maximum.

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.cargosproduced"><tt> 14 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[2] </tt></td><td>
Amounts of cargo produced so far this month

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.cargostransported"><tt> 18 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[2] </tt></td><td>
Amounts of cargo transported so far this month

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.lastmonthtranspfracts"><tt> 1C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[2] </tt></td><td>
Fractions of cargo transported last month (<tt>FF</tt> means 100%)

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.lastmonthproduced"><tt> 1E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[2] </tt></td><td>
Amounts of cargo produced last month

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.lastmonthtransported"><tt> 22 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[2] </tt></td><td>
Amounts of cargo transported last month

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.type"><tt> 26 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
<a name="IndustryTypes">Industry type</a>:

<!-- enumeration table: industry types -->

<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td align="left">Coal mine</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>&nbsp; </td><td align="left">Power station</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>&nbsp; </td><td align="left">Sawmill</td></tr>
<tr><td nowrap="" valign="top"><tt>03</tt>&nbsp; </td><td align="left">Forest</td></tr>
<tr><td nowrap="" valign="top"><tt>04</tt>&nbsp; </td><td align="left">Oil refinery</td></tr>
<tr><td nowrap="" valign="top"><tt>05</tt>&nbsp; </td><td align="left">Oil rig</td></tr>
<tr><td nowrap="" valign="top"><tt>06</tt>&nbsp; </td><td align="left">Factory (temperate <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_climate">climate</a>)</td></tr>
<tr><td nowrap="" valign="top"><tt>07</tt>&nbsp; </td><td align="left">Printing works</td></tr>
<tr><td nowrap="" valign="top"><tt>08</tt>&nbsp; </td><td align="left">Steel mill</td></tr>
<tr><td nowrap="" valign="top"><tt>09</tt>&nbsp; </td><td align="left">Farm (temperate or sub-arctic)</td></tr>
<tr><td nowrap="" valign="top"><tt>0A</tt>&nbsp; </td><td align="left">Copper ore mine</td></tr>
<tr><td nowrap="" valign="top"><tt>0B</tt>&nbsp; </td><td align="left">Oil wells</td></tr>
<tr><td nowrap="" valign="top"><tt>0C</tt>&nbsp; </td><td align="left">Bank (temperate)</td></tr>
<tr><td nowrap="" valign="top"><tt>0D</tt>&nbsp; </td><td align="left">Food processing plant</td></tr>
<tr><td nowrap="" valign="top"><tt>0E</tt>&nbsp; </td><td align="left">Paper mill</td></tr>
<tr><td nowrap="" valign="top"><tt>0F</tt>&nbsp; </td><td align="left">Gold mine</td></tr>
<tr><td nowrap="" valign="top"><tt>10</tt>&nbsp; </td><td align="left">Bank (sub-tropical or sub-arctic)</td></tr>
<tr><td nowrap="" valign="top"><tt>11</tt>&nbsp; </td><td align="left">Diamond mine</td></tr>
<tr><td nowrap="" valign="top"><tt>12</tt>&nbsp; </td><td align="left">Iron ore mine</td></tr>
<tr><td nowrap="" valign="top"><tt>13</tt>&nbsp; </td><td align="left">Fruit plantation</td></tr>
<tr><td nowrap="" valign="top"><tt>14</tt>&nbsp; </td><td align="left">Rubber plantation</td></tr>
<tr><td nowrap="" valign="top"><tt>15</tt>&nbsp; </td><td align="left">Water supply</td></tr>
<tr><td nowrap="" valign="top"><tt>16</tt>&nbsp; </td><td align="left">Water tower</td></tr>
<tr><td nowrap="" valign="top"><tt>17</tt>&nbsp; </td><td align="left">Factory (sub-tropical)</td></tr>
<tr><td nowrap="" valign="top"><tt>18</tt>&nbsp; </td><td align="left">Farm (sub-tropical)</td></tr>
<tr><td nowrap="" valign="top"><tt>19</tt>&nbsp; </td><td align="left">Lumber mill</td></tr>
<tr><td nowrap="" valign="top"><tt>1A</tt>&nbsp; </td><td align="left">Candyfloss forest</td></tr>
<tr><td nowrap="" valign="top"><tt>1B</tt>&nbsp; </td><td align="left">Sweet factory</td></tr>
<tr><td nowrap="" valign="top"><tt>1C</tt>&nbsp; </td><td align="left">Battery farm</td></tr>
<tr><td nowrap="" valign="top"><tt>1D</tt>&nbsp; </td><td align="left">Cola wells</td></tr>
<tr><td nowrap="" valign="top"><tt>1E</tt>&nbsp; </td><td align="left">Toy shop</td></tr>
<tr><td nowrap="" valign="top"><tt>1F</tt>&nbsp; </td><td align="left">Toy factory</td></tr>
<tr><td nowrap="" valign="top"><tt>20</tt>&nbsp; </td><td align="left">Plastic fountains</td></tr>
<tr><td nowrap="" valign="top"><tt>21</tt>&nbsp; </td><td align="left">Fizzy drink factory</td></tr>
<tr><td nowrap="" valign="top"><tt>22</tt>&nbsp; </td><td align="left">Bubble generator</td></tr>
<tr><td nowrap="" valign="top"><tt>23</tt>&nbsp; </td><td align="left">Toffee quarry</td></tr>
<tr><td nowrap="" valign="top"><tt>24</tt>&nbsp; </td><td align="left">Sugar mine</td></tr>
</tbody></table>

<!-- end of enumeration table: industry types -->

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.owner"><tt> 27 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
<a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">Owner</a> of the industry (apparently always <tt>10</tt>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.buildingscolor"><tt> 28 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Colour of industry buildings that support variable colouring scheme

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.lastyearproduction"><tt> 29 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
The last year anything was produced (base +1920)

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.prodcounter"><tt> 2A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Production counter, decremented on every tick, used for timing of primary industry production

</td></tr>
<tr><td valign="top" nowrap=""><a name="industry.didtransform"><tt> 2C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Set to <tt>01</tt> if the industry has accepted some cargo and produced something from it recently; in all other cases it's <tt>00</tt>. Used for toy factory animations.

</td></tr>
</tbody></table></td></tr></tbody></table>

<!-- end of structure description table: industry array -->

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_CompanyArray"><tt> 52A62 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [3B2][8] </tt></td><td>
Company array (8 entries), locations within each entry follow:

</td></tr>
<tr><td colspan="3">

<!-- structure description table: company array -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td><table>
<tbody><tr><th align="left">Offset</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="company.name"><tt> 000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td>
Company name (text ID), <tt>00</tt> if an empty slot

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.nameparts"><tt> 002 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Company name parts (for AI's randomly-generated names), bitcoded (no exact information yet)

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.managerface"><tt> 006 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Manager's face, bitcoded (no exact information yet)

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.managername"><tt> 00A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Manager's name (text ID)

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.managernameparts"><tt> 00C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Manager's name parts (for AI's randomly-generated names), bitcoded (no exact information yet)

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.cash"><tt> 010 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Current company's cash

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.loan"><tt> 014 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Current company's loan

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.colorscheme"><tt> 018 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Company's colour scheme

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.cashfract"><tt> 019 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Fractional part of the current company's cash, used to increase the accuracy of vehicle running costs

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.quartersindebt"><tt> 01A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Number of quarters the company has been in debt

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.introuble"><tt> 01B </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
AI companies: nonzero if the company is in trouble and seeking a take-over <br>
Player companies: nonzero if the company has gone bankrupt

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.takeovercost"><tt> 01C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Amount required to take over the company (if it is seeking a take-over)

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.takeovercountdown"><tt> 020 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
If <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#company.introuble">field <tt>01B</tt></a> is nonzero, 8 is subtracted each 8 ticks, and when the value becomes zero or negative, one of the following happens:
<ul>
<li>for AI companies: if field <tt>01B</tt> is less than <tt>FE</tt>, a take-over proposal is issued to another company (field <tt>01B</tt> determines which one; the algorithm is similar to <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#vehtype.availinfo">exclusive vehicle testing offers</a>)</li>
<li>for Player 1: game over</li>
</ul>

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.cargotypesdelivered"><tt> 022 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Bit map of <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">cargo types</a> delivered in the current quarter

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.expenses"><tt> 026 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L[D][3] </tt></td><td>
Three tables of expenses (negative values mean income), for this year, last year and a year before the last:
<table>
<tbody><tr><th>&nbsp;&nbsp;Offset&nbsp;</th><th align="left">Type of expenses</th></tr>
<tr><td colspan="2"></td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>00</tt></td><td align="left">Construction</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>04</tt></td><td align="left">New vehicles</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>08</tt></td><td align="left">Train running costs</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>0C</tt></td><td align="left">Road vehicle running costs</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>10</tt></td><td align="left">Aircraft running costs</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>14</tt></td><td align="left">Ship running costs</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>18</tt></td><td align="left">Property maintenance</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>1C</tt></td><td align="left">Train income</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>20</tt></td><td align="left">Road vehicles income</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>24</tt></td><td align="left">Aircraft income</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>28</tt></td><td align="left">Ship income</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>2C</tt></td><td align="left">Loan interest</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>30</tt></td><td align="left">Other</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.qstats"><tt> 0C2 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L[5][19] </tt></td><td>
Company's performance data for the current quarter and the previous 24 quarters:
<table>
<tbody><tr><th>&nbsp;&nbsp;Offset&nbsp;</th><th align="left">Data</th></tr>
<tr><td colspan="2"></td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>00</tt></td><td align="left">Income</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>04</tt></td><td align="left">Total of all vehicle running costs, property maintenance and loan interest. The operating profit is half of the sum of this value and income, with negative sign.</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>08</tt></td><td align="left">Units of cargo delivered</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>0C</tt></td><td align="left">Performance score</td></tr>
<tr><td align="center" valign="top" nowrap=""><tt>10</tt></td><td align="left">Company value</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.inaugurated"><tt> 2B6 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
The year the company was inaugurated (full value, not base-1920)

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.lastopXY"><tt> 2B8 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
XY index of the tile where this company did its most recent action

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.perfquarters"><tt> 2BA </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Number of previous quarters for which the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#company.qstats">company's performance data</a> are valid

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.AIaction"><tt> 2BB </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Current action of the AI company (valid values range from <tt>00</tt> to <tt>17</tt>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.currbuiltservicecargo"><tt> 326 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
<a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">Cargo type</a> of the service the AI is currently building

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.noexcloffers"><tt> 3A1 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
If nonzero, no vehicle testing exclusive offers are issued to this company for this number of quarters

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.traintypes"><tt> 3A3 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Number of railway types accessible to this company (1 - only conventional railway, 2 - railway and monorail, 3 - all)

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.HQlocation"><tt> 3A4 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
XY of the company headquarters, <tt>FFFF</tt> if not built

</td></tr>
<tr><td valign="top" nowrap=""><a name="company.shareowners"><tt> 3A6 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[4] </tt></td><td>
Indices of companies owning the four shares, <tt>FF</tt> if none

</td></tr>
</tbody></table></td></tr></tbody></table>

<!-- end of structure description table: company array -->

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_VehicleArray"><tt> 547F2 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [80][352*x] </tt></td><td> 
Vehicle array (normally +850 entries; in TTDPatch, depends on the setting of the 'morevehicles' switch, shown as '<tt>x</tt>' in the size column on the left; see also <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatch.vehfactor">TTDPatch data in the L3 array</a>.). Locations within each entry follow:

</td></tr>
<tr><td colspan="3">

<!-- structure description table: vehicle array -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td><table>
<tbody><tr><th align="left">Offset</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="veh.class"><tt> 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td>
Class of the vehicle:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td align="left">Empty slot</td></tr>
<tr><td nowrap="" valign="top"><tt>10</tt>&nbsp; </td><td align="left">Railway vehicle</td></tr>
<tr><td nowrap="" valign="top"><tt>11</tt>&nbsp; </td><td align="left">Road vehicle</td></tr>
<tr><td nowrap="" valign="top"><tt>12</tt>&nbsp; </td><td align="left">Ship</td></tr>
<tr><td nowrap="" valign="top"><tt>13</tt>&nbsp; </td><td align="left">Aircraft</td></tr>
<tr><td nowrap="" valign="top"><tt>14</tt>&nbsp; </td><td align="left">Pseudo-vehicle (a special effect)</td></tr>
<tr><td nowrap="" valign="top"><tt>15</tt>&nbsp; </td><td align="left">Special vehicle (disaster-related)</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.subclass"><tt> 01 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Subclass of the vehicle:
<ul>
<li>Railway vehicles:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td align="left">Leading engine of a train</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>&nbsp; </td><td align="left">Wagon or additional engine</td></tr>
<tr><td nowrap="" valign="top"><tt>04</tt>&nbsp; </td><td align="left">First in a wagon chain (in depot)</td></tr>
</tbody></table>
</li><li>For road vehicles and ships, seems to be always 0
</li><li>Aircraft:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td align="left">Helicopter</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>&nbsp; </td><td align="left">Airplane</td></tr>
<tr><td nowrap="" valign="top"><tt>04</tt>&nbsp; </td><td align="left">Shadow (doubles as the mail compartment)</td></tr>
<tr><td nowrap="" valign="top"><tt>06</tt>&nbsp; </td><td align="left">Rotor</td></tr>
</tbody></table>
</li><li>Pseudo-vehicles:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td align="left">Smoke from power station chimney</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>&nbsp; </td><td align="left">Smoke puff from a steam engine</td></tr>
<tr><td nowrap="" valign="top"><tt>04</tt>&nbsp; </td><td align="left">Smoke puff from a diesel engine</td></tr>
<tr><td nowrap="" valign="top"><tt>06</tt>&nbsp; </td><td align="left">Spark from an electric engine</td></tr>
<tr><td nowrap="" valign="top"><tt>08</tt>&nbsp; </td><td align="left">Smoke puff from a broken down aircraft or copper ore mine chimney</td></tr>
<tr><td nowrap="" valign="top"><tt>0A</tt>&nbsp; </td><td align="left">Large fireball</td></tr>
<tr><td nowrap="" valign="top"><tt>0C</tt>&nbsp; </td><td align="left">Smoke from a broken down vehicle (other than aircraft)</td></tr>
<tr><td nowrap="" valign="top"><tt>0E</tt>&nbsp; </td><td align="left">Small fireball</td></tr>
<tr><td nowrap="" valign="top"><tt>10</tt>&nbsp; </td><td align="left">Road works vehicle (a yellow bulldozer)</td></tr>
<tr><td nowrap="" valign="top"><tt>12</tt>&nbsp; </td><td align="left">Bubble (from a bubble generator in toyland)</td></tr>
</tbody></table>
</li><li>Special vehicles:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td align="left">Zeppelin</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>&nbsp; </td><td align="left">Zeppelin's shadow</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>&nbsp; </td><td align="left">Small UFO</td></tr>
<tr><td nowrap="" valign="top"><tt>03</tt>&nbsp; </td><td align="left">Small UFO's shadow</td></tr>
<tr><td nowrap="" valign="top"><tt>04</tt>&nbsp; </td><td align="left">Military airplane</td></tr>
<tr><td nowrap="" valign="top"><tt>05</tt>&nbsp; </td><td align="left">Military airplane's shadow</td></tr>
<tr><td nowrap="" valign="top"><tt>06</tt>&nbsp; </td><td align="left">Military helicopter</td></tr>
<tr><td nowrap="" valign="top"><tt>07</tt>&nbsp; </td><td align="left">Military helicopter's shadow</td></tr>
<tr><td nowrap="" valign="top"><tt>08</tt>&nbsp; </td><td align="left">Military helicopter's rotor</td></tr>
<tr><td nowrap="" valign="top"><tt>09</tt>&nbsp; </td><td align="left">Large UFO</td></tr>
<tr><td nowrap="" valign="top"><tt>0A</tt>&nbsp; </td><td align="left">Large UFO's shadow</td></tr>
<tr><td nowrap="" valign="top"><tt>0B</tt>&nbsp; </td><td align="left">X-COM aircraft</td></tr>
<tr><td nowrap="" valign="top"><tt>0C</tt>&nbsp; </td><td align="left">X-COM aircraft's shadow</td></tr>
<tr><td nowrap="" valign="top"><tt>0D</tt>&nbsp; </td><td align="left">Small submarine</td></tr>
<tr><td nowrap="" valign="top"><tt>0E</tt>&nbsp; </td><td align="left">Large submarine</td></tr>
</tbody></table>
</li></ul>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.nextinbblockidx"><tt> 02 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Index of the next in a list of vehicles sharing a bounding block (see <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_FirstVehInBBlockArray">location <tt>72F72</tt></a>), <tt>FFFF</tt> if none

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.idx"><tt> 04 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Index of this vehicle in the vehicle array

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.scheduleptr"><tt> 06 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Pointer to the schedule string (see <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_ScheduleHeap">location <tt>01C18</tt></a>), <tt>FFFFFFFF</tt> if N/A

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.currentorder"><tt> 0A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
The currently active order. Bits 0..4 determine the type of the order:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td>
<td align="left">No orders
</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>&nbsp; </td>
<td align="left">Go to station: station index in the upper byte; <br>bit 5 set = unload; <br>bit 6 set = full load; <br>bit 7 set = non-stop
</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>&nbsp; </td>
<td align="left">Go to depot: depot index in the upper byte; <br>bit 6 set = manually sent; <br>bit 7 always set; <br>[TTDPatch] bit 5 set = scheduled; then: bit 6 set = only after the servicing interval has expired
</td></tr>
<tr><td nowrap="" valign="top"><tt>03</tt>&nbsp; </td>
<td align="left">Loading/unloading; <br>bit 6 set = full load; <br> bit 7 set = scheduled
</td></tr>
<tr><td nowrap="" valign="top"><tt>04</tt>&nbsp; </td>
<td align="left">Finished loading/unloading; all the other bits are 0 (apparently not used for aircraft)
</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.totalorders"><tt> 0C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Number of orders in the schedule

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.currentorderidx"><tt> 0D </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Index of the current order in the schedule

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.target"><tt> 0E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Target of the vehicle:
<br>for rail vehicles, road vehicles and ships: the XY of the current target, <tt>FFFF</tt> if none
<br>for aircraft seems to be unused

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.loadtime"><tt> 10 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Time (in ticks) remaining to complete the current load/unload operation;
<br>also used for class-specific purposes

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.lastmaintenance"><tt> 12 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Date of the last service (in days since 1920-1-1)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.serviceinterval"><tt> 14 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Servicing interval in days

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.laststation"><tt> 16 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Index of the last station visited, <tt>FF</tt> if N/A

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.cycle"><tt> 17 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Cycle counter, incremented every time the vehicle is processed (aircraft are processed 6 times per tick, other vehicles are processed once per tick)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.maxspeed"><tt> 18 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Maximum speed of the vehicle. The unit is:
<ul compact="">
<li>for trains: mph/1.6 (note: this is almost, but not quite, km/h)</li>
<li>for road vehicles and ships: mph/3.2</li>
<li>for aircraft: mph*8</li>
</ul>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.X"><tt> 1A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
The X location

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.Y"><tt> 1C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
The Y location

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.Z"><tt> 1E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
The Z location (altitude)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.direction"><tt> 1F </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Direction: <tt>00</tt>=N, <tt>01</tt>=NE, <tt>02</tt>=E, <tt>03</tt>=SE, <tt>04</tt>=S, <tt>05</tt>=SW, <tt>06</tt>=W, <tt>07</tt>=NW

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.Xoffset"><tt> 20 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Signed value added to the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.X">X location</a> to obtain the base X of the vehicle's bounding box

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.Yoffset"><tt> 21 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Signed value added to the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.Y">Y location</a> to obtain the base Y of the vehicle's bounding box

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.extents"><tt> 22 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[3] </tt></td><td>
X, Y and Z extents of the vehicle's <dfn>bounding box</dfn> (the notional three-dimensional box around the vehicle in the landscape)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.owner"><tt> 25 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
<a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">Owner</a> of the vehicle

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.XY"><tt> 26 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
XY index of the vehicle's location

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.cursprite"><tt> 28 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Current sprite

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.spritebox"><tt> 2A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[4] </tt></td><td>
Vehicle's sprite box. 4 absolute pixel coordinates, in the following order: left, right, top, bottom.
<br><small>Warning: Don't mess with these values unless you really know what you're doing. See also the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_FirstVehInBBlockArray">location <tt>72F72</tt></a>.</small>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.status"><tt> 32 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
<table>
<tbody><tr><td align="left" valign="top" nowrap="">bit 0 set:</td><td align="left">invisible (in tunnel or depot)</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 1 set:</td><td align="left">stopped</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 3 set:</td><td align="left">has owner's colour scheme</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 5 set:</td><td align="left">transparent</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 7 set:</td><td align="left">crashed</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.curspeed"><tt> 34 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Current speed, see <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.maxspeed">field <tt>18</tt></a> for the unit (exception: for aircraft not in flight TTDPatch takes mph/0.8 as the unit, although it's for the display only)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.curspeedfract"><tt> 36 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Fractional part of the current speed

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.acceleration"><tt> 37 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Acceleration
<br><small>Note: Except for aircraft, there's little point in changing this value as it is either unused or updated frequently.</small>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.movementfract"><tt> 38 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
On each round of <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.cycle">vehicle processing</a>, if the vehicle is not stopped, the low byte of <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.curspeed">current speed</a> (or 3/4 of the current speed, if bit 0 of <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.direction">vehicle direction</a> is clear) is subtracted from this field; if the result overflows the vehicle is to move by 1 unit of location (for trains, the vehicle additionally is to move by the number of units equal to the high byte of the current speed)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.cargotype"><tt> 39 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
<a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">Cargo type</a>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.capacity"><tt> 3A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Cargo capacity

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.currentload"><tt> 3C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Current cargo load

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.cargosource"><tt> 3E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Source of the current cargo, if any (station index)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.cargotransittime"><tt> 3F </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Cargo transit time, in +185 ticks (~2.5 days) units

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.age"><tt> 40 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Age of the vehicle in days

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.maxage"><tt> 42 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Maximum age of the vehicle in days

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.yearbuilt"><tt> 44 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Year the vehicle was built (<tt>00</tt> means +1920)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.consistnumber"><tt> 45 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Ordinal number of train, road vehicle, ship or aircraft as shown in the vehicle list

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.vehtypeid"><tt> 46 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Vehicle type ID

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.spritetype"><tt> 48 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Class-specific offset to a sprite set for this vehicle

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.daycounter"><tt> 49 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Incremented daily, when the low 3 bits are zero (i.e. every 8 days) <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.value">vehicle's value</a> is reduced by 1/256

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.breakdowns"><tt> 4A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Number of breakdowns since the last service

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.breakdowncountdown"><tt> 4B </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
1 when broken down; &gt;1 when breaking down (a countdown value)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.breakdowntime"><tt> 4C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Time (in ticks) until the end of a breakdown

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.breakdownthreshold"><tt> 4D </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Breakdown threshold. Incremented daily unless the vehicle is stopped, moving very slowly (i.e. <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.curspeed">field <tt>34</tt></a> is less than 5), or broken down; occasionally <tt>19</tt> is added as well; the top limit is always <tt>FF</tt>. When it reaches some value that depends on the current reliability, vehicle class and the 'breakdowns' difficulty setting, a breakdown is initiated and this field is reset to 0.

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.reliability"><tt> 4E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Current reliability, <tt>FFFF</tt> means 100%

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.reliabilitydecspeed"><tt> 50 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
The rate at which the reliability decreases (value subtracted each day from the current reliability)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.profitthisyear"><tt> 52 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Profit this year

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.profitlastyear"><tt> 56 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Profit last year

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.nextunitidx"><tt> 5A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Index of the next vehicle in the consist, <tt>FFFF</tt> if none

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.value"><tt> 5C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Current value of the vehicle

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.name"><tt> 60 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Name of the vehicle (text ID). Default names (with <var>&lt;number&gt;</var> stored in <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.consistnumber">field <tt>45</tt></a>) are:
<ul>
<li><tt>8864</tt> = Train <var>&lt;number&gt;</var></li>
<li><tt>902B</tt> = Road Vehicle <var>&lt;number&gt;</var></li>
<li><tt>9830</tt> = Ship <var>&lt;number&gt;</var></li>
<li><tt>A02F</tt> = Aircraft <var>&lt;number&gt;</var></li>
</ul>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.movementstat"><tt> 62 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Current vehicle's movement state, class-specific:
<ul>
<li>trains and ships:<br>
bits 0..5 correspond to track layout in <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape5">L5</a> entries for regular track, see <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#Class1">Class 1</a> (only one bit can be set at a time);<br><tt>40</tt> - in tunnel, <tt>80</tt> - in depot
</li>
<li>road vehicles:<br>
<ul>
<li><tt>00</tt>..<tt>0F</tt>: direction of travel:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>: </td><td align="left">NE</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>: </td><td align="left">SE</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>: </td><td align="left">SE, turning left</td></tr>
<tr><td nowrap="" valign="top"><tt>03</tt>: </td><td align="left">NE, turning right</td></tr>
<tr><td nowrap="" valign="top"><tt>04</tt>: </td><td align="left">SE, turning right</td></tr>
<tr><td nowrap="" valign="top"><tt>05</tt>: </td><td align="left">SW, turning left</td></tr>
<tr><td nowrap="" valign="top"><tt>06</tt>: </td><td align="left">NE, turning back</td></tr>
<tr><td nowrap="" valign="top"><tt>07</tt>: </td><td align="left">SE, turning back</td></tr>
<tr><td nowrap="" valign="top"><tt>08</tt>: </td><td align="left">SW</td></tr>
<tr><td nowrap="" valign="top"><tt>09</tt>: </td><td align="left">NW</td></tr>
<tr><td nowrap="" valign="top"><tt>0A</tt>: </td><td align="left">SW, turning right</td></tr>
<tr><td nowrap="" valign="top"><tt>0B</tt>: </td><td align="left">NW, turning left</td></tr>
<tr><td nowrap="" valign="top"><tt>0C</tt>: </td><td align="left">NE, turning left</td></tr>
<tr><td nowrap="" valign="top"><tt>0D</tt>: </td><td align="left">NW, turning right</td></tr>
<tr><td nowrap="" valign="top"><tt>0E</tt>: </td><td align="left">SW, turning back</td></tr>
<tr><td nowrap="" valign="top"><tt>0F</tt>: </td><td align="left">NW, turning back</td></tr>
</tbody></table></li>
<li><tt>20</tt>..<tt>2F</tt>: in a station<br>
bits 3..0 = sum of direction of travel at entrance (possible values are <tt>00</tt>, <tt>01</tt>, <tt>08</tt> and <tt>09</tt>, see above) and number of the bay the vehicle is using (<tt>00</tt> = bay 1, <tt>02</tt> = bay 2)
</li><li><tt>FE</tt>: in depot</li>
<li><tt>FF</tt>: in tunnel</li>
</ul>
</li>
<li>aircraft: [note: the exact semantics are still somewhat uncertain]<br>
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>: </td><td align="left">entering hangar</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>: </td><td align="left">going to hangar entrance point</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>..<tt>04</tt>: </td><td align="left">going to pad 1..3, respectively</td></tr>
<tr><td nowrap="" valign="top"><tt>05</tt>: </td><td align="left">going to pad 2 / pad 3 common entry point</td></tr>
<tr><td nowrap="" valign="top"><tt>06</tt>: </td><td align="left">going to pad 2 / pad 3 / hangar common entry point (large airports only)</td></tr>
<tr><td nowrap="" valign="top"><tt>07</tt>: </td><td align="left">going to airport's junction point (this is the location where helicopters land and take off)</td></tr>
<tr><td nowrap="" valign="top"><tt>08</tt>: </td><td align="left">leaving runway</td></tr>
<tr><td nowrap="" valign="top"><tt>09</tt>: </td><td align="left">going to the in way</td></tr>
<tr><td nowrap="" valign="top"><tt>0A</tt>: </td><td align="left">entering runway</td></tr>
<tr><td nowrap="" valign="top"><tt>0B</tt>: </td><td align="left">going to the out way</td></tr>
<tr><td nowrap="" valign="top"><tt>0C</tt>: </td><td align="left">airplane waiting for take-off clearance (?)</td></tr>
<tr><td nowrap="" valign="top"><tt>0D</tt>: </td><td align="left">airplane taking off</td></tr>
<tr><td nowrap="" valign="top"><tt>0E</tt>: </td><td align="left">airplane preparing to take-off</td></tr>
<tr><td nowrap="" valign="top"><tt>0F</tt>: </td><td align="left">airplane climbing after take-off</td></tr>
<tr><td nowrap="" valign="top"><tt>10</tt>..<tt>14</tt>: </td><td align="left">in flight<br>
<tt>10</tt> - final approach before landing or going for another round<br>
<tt>12</tt> - heading for tower contact point (where airplanes initiate their approach)<br>
<tt>14</tt> - heading for the final approach entry point</td></tr>
<tr><td nowrap="" valign="top"><tt>15</tt>: </td><td align="left">airplane landing (descent)</td></tr>
<tr><td nowrap="" valign="top"><tt>16</tt>: </td><td align="left">airplane braking after touchdown</td></tr>
<tr><td nowrap="" valign="top"><tt>17</tt>: </td><td align="left">helicopter taking off from airport</td></tr>
<tr><td nowrap="" valign="top"><tt>18</tt>: </td><td align="left">helicopter preparing to land at airport</td></tr>
<tr><td nowrap="" valign="top"><tt>19</tt>: </td><td align="left">helicopter landing at airport</td></tr>
<tr><td nowrap="" valign="top"><tt>1A</tt>: </td><td align="left">helicopter taking off from heliport</td></tr>
<tr><td nowrap="" valign="top"><tt>1B</tt>: </td><td align="left">helicopter preparing to land at heliport</td></tr>
<tr><td nowrap="" valign="top"><tt>1C</tt>: </td><td align="left">helicopter landing at heliport</td></tr>
</tbody></table>
</li>
</ul>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.field_63"><tt> 63 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
For aircraft: the airport to which the current movement action refers

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.field_64"><tt> 64 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
For road vehicles: if the vehicle is blocked by another one, counts for how long; override when &gt;<tt>05C8</tt>(?)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.field_66"><tt> 66 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
For rail vehicles: railway type: 0 - 'conventional' railroad, 1 - monorail, 2 - maglev
<br>
For road vehicles: normally <tt>00</tt>, set to <tt>10</tt> when overtaking another road vehicle
<br>
For aircraft: current movement action:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>: </td><td align="left">in hangar</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>..<tt>03</tt>: </td><td align="left">on pad 1..3, respectively</td></tr>
<tr><td nowrap="" valign="top"><tt>04</tt>..<tt>06</tt>: </td><td align="left">leaving hangar and heading for pad 1..3, respectively</td></tr>
<tr><td nowrap="" valign="top"><tt>07</tt>..<tt>09</tt>: </td><td align="left">landing and heading for pad 1..3, respectively</td></tr>
<tr><td nowrap="" valign="top"><tt>0A</tt>..<tt>0C</tt>: </td><td align="left">leaving pad 1..3, respectively, and heading for hangar</td></tr>
<tr><td nowrap="" valign="top"><tt>0D</tt>..<tt>0F</tt>: </td><td align="left">leaving pad 1..3, respectively, and taking off</td></tr>
<tr><td nowrap="" valign="top"><tt>10</tt>: </td><td align="left">leaving hangar and taking off</td></tr>
<tr><td nowrap="" valign="top"><tt>11</tt>: </td><td align="left">landing and heading for hangar</td></tr>
<tr><td nowrap="" valign="top"><tt>12</tt>: </td><td align="left">in flight</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.field_67"><tt> 67 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
For road vehicles: overtaking progress counter. Incremented with every vehicle's movement step while <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.field_66">field <tt>66</tt></a> is nonzero; the initial value is <tt>11</tt> if the vehicle being overtaken is stopped (i.e. its <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.curspeed">field <tt>34</tt></a> is zero or <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.status">field <tt>32</tt></a> bit 1 is set), otherwise <tt>00</tt>; when this value reaches <tt>23</tt>, <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.field_66">field <tt>66</tt></a> is cleared (overtaking progress may start again immediately if the conditions for overtaking are fulfilled).

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.field_68"><tt> 68 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
For road vehicles: (?) used to count the 'progress' of vehicle's crash; incremented on every tick if nonzero; when reaches <tt>08AC</tt> the vehicle is deleted

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.field_6A"><tt> 6A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
? (nonzero = road vehicle collision detection disabled; decremented every tick until zero)
[more info needed]

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.shortened"><tt> 73 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
[TTDPatch] how much shorter the wagon is

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.realpower"><tt> 74 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
[TTDPatch] real train power (taking multiple engines into account)

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.fullweight"><tt> 78 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
[TTDPatch] With realistic acceleration: negated total weight of the vehicle, including cargo; without realistic acceleration: full acceleration value

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.random"><tt> 7A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
[TTDPatch] random bits, changed according to new sprite data

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.newrandom"><tt> 7B </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
[TTDPatch] which random triggers occurred so far, bitcoded

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.engineidx"><tt> 7C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
[TTDPatch] Index of the 'engine' (i.e. the first vehicle) of the consist

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.loadflags"><tt> 7E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
[TTDPatch] Flags used for gradual loading

</td></tr>
<tr><td valign="top" nowrap=""><a name="veh.lastspeed"><tt> 7F </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
[TTDPatch] Last speed shown in the vehicle window status bar

</td></tr>
</tbody></table></td></tr></tbody></table>

<!-- end of structure description table: vehicle array -->

</td></tr>
<tr><td colspan="3">
<p>
Since the vehicle array has variable length, all the following data have variable locations. The "<tt>+X</tt>" suffix indicates that the location is given assuming the standard size of the vehicle array; if <var>x</var> is the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatch.vehfactor">vehicle array multiplier</a>, then <tt>X = ((<var>x</var>-1)*0x1A900)</tt>.
</p>
<p></p>
</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_CustomStringsArray"><tt> 6F0F2+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[20][1F4] </tt></td><td>
Array of custom strings. Each string takes up exactly +32 bytes, including the terminating zero byte and possible trailing garbage.

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_FirstVehInBBlockArray"><tt> 72F72+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[1000] </tt></td><td>
Array of lists of vehicles in bounding blocks. Each entry is an index of the first vehicle in a list, or <tt>FFFF</tt> if there are no vehicles in this block.
<p><small>Don't mess with this array unless you <em>really</em> know what you're doing. If you create an inconsistent state TTD is very likely to crash sooner or later.</small></p>
<p>
If <var>X1</var> and <var>Y1</var> are left and top pixel coordinates of a vehicle's <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.spritebox">sprite box</a>, that vehicle belongs to a <dfn>bounding block</dfn>, the offset of which in this array is (C notation) </p><p align="center"><tt>((<var>X1</var> &amp; 0x1F80) &lt;&lt; 6) | ((<var>Y1</var> &amp; 0xFC0) &gt;&gt; 1) </tt></p><p>(that is, sprite boxes with the same values in bits 12..7 of <var>X1</var> and bits 11..6 of <var>Y1</var> belong to the same bounding block). Vehicles in a bounding block form a list linked via the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.nextinbblockidx">vehicle structure field 02</a>. This feature speeds up screen updates and collision detection.</p>
<p></p>
</td></tr>
<tr><td valign="top" nowrap=""><a name="_SignsArray"><tt> 74F72+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [E][28] </tt></td><td>
Array of signs (+40 entries), locations within each entry follow:

</td></tr>
<tr><td colspan="3">

<!-- structure description table: sign array -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td><table>
<tbody><tr><th align="left">Offset</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="sign.text"><tt> 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td>
Sign text (text ID), <tt>00</tt> if an empty slot

</td></tr>
<tr><td valign="top" nowrap=""><a name="sign.X"><tt> 2 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
The X location

</td></tr>
<tr><td valign="top" nowrap=""><a name="sign.Y"><tt> 4 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
The Y location

</td></tr>
<tr><td valign="top" nowrap=""><a name="sign.Z"><tt> 6 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
The Z location

</td></tr>
<tr><td valign="top" nowrap=""><a name="sign.width"><tt> 8 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Width of the sign text in pixels, normal font

</td></tr>
<tr><td valign="top" nowrap=""><a name="sign.widthsmall"><tt> 9 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Width of the sign text in pixels, small font

</td></tr>
<tr><td valign="top" nowrap=""><a name="sign.pos"><tt> A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[2] </tt></td><td>
X and Y pixel coordinates of the sign

</td></tr>
</tbody></table></td></tr></tbody></table>

<!-- end of structure description table: sign array -->

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_VehTypeArray"><tt> 751A2+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [1C][100] </tt></td><td>
Array of vehicle types (+256 entries), locations within each entry follow:

</td></tr>
<tr><td colspan="3">

<!-- structure description table: vehicle type array -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td><table>
<tbody><tr><th align="left">Offset</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.companymask"><tt> 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td>
Bit map of companies that can buy vehicles of this type

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.introdate"><tt> 02 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Date of the introduction

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.age"><tt> 04 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Age of this vehicle type (months since the introduction)

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.reliability"><tt> 06 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Reliability of new vehicles of this type

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.reliabilitydecspeed"><tt> 08 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
The rate at which the reliability decreases (see the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#veh.reliabilitydecspeed">vehicle structure field <tt>50</tt></a>)

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.reliabstart"><tt> 0A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Initial reliability after the introduction

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.reliabmax"><tt> 0C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Maximum reliability

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.reliabfin"><tt> 0E </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Final reliability

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.durphase1"><tt> 10 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Duration of phase 1 in months. In this phase, vehicle type's reliability rises from the initial to the maximum value.

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.durphase2"><tt> 12 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Duration of phase 2 in months. In this phase, vehicle type's reliability stays at the maximum value.

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.durphase3"><tt> 14 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Duration of phase 3 in months. In this phase, vehicle type's reliability drops from the maximum to the final value, then the vehicle disappears from the market.

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.lifespan"><tt> 16 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Life span of vehicles of this type in years

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.flags"><tt> 17 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
<table>
<tbody><tr><td align="left" valign="top" nowrap="">bit 0 set:</td><td align="left">is or was available on the market</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 1 set:</td><td align="left">in testing phase (may be available exclusively to one company)</td></tr>
<tr><td align="left" valign="top" nowrap="">bit 2 set:</td><td align="left">exclusive testing offer for a human player active</td></tr>
</tbody></table>

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.availinfo"><tt> 18 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
<tt>FF</tt>: Vehicle type exclusively available to one company, or the offer expired because no company qualified.
<br>Nonzero and not <tt>FF</tt>: If <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#vehtype.flags">field <tt>17</tt></a> bit 1 is set and bit 2 is clear, after the end of the day this vehicle type is offered to this company, in highest performance first order, excluding companies that have a nonzero value in their <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#company.noexcloffers">field <tt>3A1</tt></a>.  If it is a human player's company, bit 2 in the field <tt>17</tt> above is set and an offer window appears.  If it is an AI company and it's low on cash, this field is incremented so that the next company is checked the next day; otherwise, this vehicle type is made exclusively available to this company.

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.exclofferdaysleft"><tt> 19 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Number of days for the exclusive testing offer issued to a player to expire

</td></tr>
<tr><td valign="top" nowrap=""><a name="vehtype.tracktype"><tt> 1A </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Railway type: 0 - 'conventional' railroad, 1 - monorail, 2 - maglev (must be 0 for non-railway vehicle types)

</td></tr>
</tbody></table></td></tr></tbody></table>

<!-- end of structure description table: vehicle type array -->

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_nextvehiclefordailyproc"><tt> 76DA2+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Index of the next vehicle array entry to be processed by the daily vehicle processing routine (which processes +12*<var>x</var> vehicles on each tick).

</td></tr>
<tr><td valign="top" nowrap=""><a name="_SubsidyArray"><tt> 76DA4+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [4][8] </tt></td><td>
Array of subsidies (8 entries), the structure of each entry is as follows:

</td></tr>
<tr><td colspan="3">

<!-- structure description table: subsidy array -->

<table><tbody><tr><td><tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td><table>
<tbody><tr><th align="left">Offset</th><th align="left">Size</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="subsidy.cargo"><tt> 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </tt></td><td>
<a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">Cargo type</a>, <tt>FF</tt> if an empty slot

</td></tr>
<tr><td valign="top" nowrap=""><a name="subsidy.age"><tt> 1 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
0 through +11: subsidy offer, has been active for this many months
<br>+12 through +23: service already subsidised; number of months since it has been awarded plus +12

</td></tr>
<tr><td valign="top" nowrap=""><a name="subsidy.from"><tt> 2 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Cargo source:
<br>subsidy offers: town index if cargo type is 0 (passengers) or 2 (mail), industry index otherwise
<br>subsidized services: station index

</td></tr>
<tr><td valign="top" nowrap=""><a name="subsidy.to"><tt> 3 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Cargo destination:
<br>subsidy offers: town index if cargo type is 0 (passengers), 2 (mail), 5 (goods or sweets) or +11 (food or fizzy drinks), industry index otherwise
<br>subsidized services: station index

</td></tr>
</tbody></table></td></tr></tbody></table>

<!-- end of structure description table: subsidy array -->

</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="_tickstoAIcompanylaunchattempt"><tt> 76DC4+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Ticks remaining to the next attempt at launching a new AI company

</td></tr>
<tr><td valign="top" nowrap=""><a name="_savemainview"><tt> 76DC6+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[2] </tt></td><td>
Pixel X and Y coordinates of the left top corner of the main view

</td></tr>
<tr><td valign="top" nowrap=""><a name="_savemainviewzoom"><tt> 76DCA+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Zoom level of the main view: 0&nbsp;=&nbsp;normal, 1&nbsp;=&nbsp;intermediate, 2&nbsp;=&nbsp;most zoomed out

</td></tr>
<tr><td valign="top" nowrap=""><a name="_maxloan"><tt> 76DCC+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Maximum permitted loan size (in British pounds). Always an integer multiple of +50000; changes with inflation.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_maxloanintern"><tt> 76DD0+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
'Internal' value of the maximum permitted loan size, used to update the actual value (see above) according to the inflation

</td></tr>
<tr><td valign="top" nowrap=""><a name="_recessioncounter"><tt> 76DD4+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Recession counter, decremented monthly.  If less than or equal to 0 a world recession is in effect; when reaches -12 (<tt>FFF4</tt>) the recession is over and this counter is reset to a random value between <tt>138</tt> and <tt>237</tt>.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_daystonextdisaster"><tt> 76DD6+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Days to the next disaster

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargotypenames"><tt> 76DD8+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
Names (text IDs) of <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">cargo types</a>

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargounitnames"><tt> 76DF0+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
Names (text IDs) of units of cargo

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargoamount1names"><tt> 76E08+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
Text IDs for 1 unit of cargo

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargoamountnnames"><tt> 76E20+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
Text IDs for more than 1 unit of cargo

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargoshortnames"><tt> 76E38+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
Text IDs for <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">cargo type</a> name abbreviations

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargoicons"><tt> 76E50+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
<a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">Cargo type</a> icons (displayed in station windows)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_VehTypeNamesArray"><tt> 76E68+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[100] </tt></td><td>
Names (text IDs) of all the +256 vehicle types

</td></tr>
<tr><td valign="top" nowrap=""><a name="_AICargoVehicleTable"><tt> 77068+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> [90] </tt></td><td>
Table of vehicles the AI will use to transport different <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">cargo types</a>:

<!-- structure description table: AI cargo vehicles -->

<table>
<tbody><tr><th align="left">Offset&nbsp;</th><th align="left">Size&nbsp;</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="AIcargovehicles.railway"><tt> 00 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
Vehicle types of railroad wagons, one for each cargo type

</td></tr>
<tr><td valign="top" nowrap=""><a name="AIcargovehicles.monorail"><tt> 18 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
Vehicle types of monorail wagons, one for each cargo type

</td></tr>
<tr><td valign="top" nowrap=""><a name="AIcargovehicles.maglev"><tt> 30 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
Vehicle types of maglev wagons, one for each cargo type

</td></tr>
<tr><td valign="top" nowrap=""><a name="AIcargovehicles.road"><tt> 48 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
First road vehicle type for each cargo type

</td></tr>
<tr><td valign="top" nowrap=""><a name="AIcargovehicles.roadnum"><tt> 60 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[C] </tt></td><td>
Number of road vehicle types following the first type, for each cargo type (may include vehicles not available in the current climate)

</td></tr>
<tr><td valign="top" nowrap=""><a name="AIcargovehicles.ship"><tt> 6C </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W[C] </tt></td><td>
First ship type for each cargo type

</td></tr>
<tr><td valign="top" nowrap=""><a name="AIcargovehicles.shipnum"><tt> 84 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[C] </tt></td><td>
Number of ship types following the first type, for each cargo type (may include vehicles not available in the current climate; may be 0, indicating that there are no ship types to carry this cargo type)

</td></tr>
</tbody></table>

<!-- end of structure description table: AI cargo vehicles -->

</td></tr>
<tr><td valign="top" nowrap=""><a name="_player1"><tt> 770F8+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Company index of the player 1 (<tt>10</tt> if there is no player 1, i.e. in the scenario editor)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_player2"><tt> 770F9+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Company index of the player 2, i.e. the remote player in a two-player game (<tt>FF</tt> in single-player game)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_nextstationforperiodicproc"><tt> 770FA+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Index of the next station that will be subject to the periodic status update on the next tick

</td></tr>
<tr><td valign="top" nowrap=""><a name="_currency"><tt> 770FB+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Player's currency unit: 0&nbsp;=&nbsp;British pound, 1&nbsp;=&nbsp;dollar, 2&nbsp;=&nbsp;French franc, 3&nbsp;=&nbsp;Deutschmark, 4&nbsp;=&nbsp;yen, 5&nbsp;=&nbsp;peseta
<br><small>(Note: internally everything is calculated in pounds)</small>

</td></tr>
<tr><td valign="top" nowrap=""><a name="_measurementsystem"><tt> 770FC+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Player's measurement system: 0&nbsp;=&nbsp;imperial, 1&nbsp;=&nbsp;metric

</td></tr>
<tr><td valign="top" nowrap=""><a name="_nextcompanyforperiodicproc"><tt> 770FD+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Index of the next company that will be subject to the periodic status update on the next tick

</td></tr>
<tr><td valign="top" nowrap=""><a name="_currentyear"><tt> 770FE+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Current year (offset from +1920)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_currentmonth"><tt> 770FF+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Current month (0&nbsp;=&nbsp;January, 1&nbsp;=&nbsp;February etc.)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_companycolors"><tt> 77100+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[8] </tt></td><td>
Colour schemes of all the 8 possible companies

</td></tr>
<tr><td valign="top" nowrap=""><a name="_costinflation"><tt> 77108+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Yearly inflation rate for all prices except cargo payments, in percent

</td></tr>
<tr><td valign="top" nowrap=""><a name="_paymentinflation"><tt> 77109+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Yearly inflation rate for cargo payments, in percent

</td></tr>
<tr><td valign="top" nowrap=""><a name="_interestrate"><tt> 7710A+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Yearly loan interest rate in percent

</td></tr>
<tr><td valign="top" nowrap=""><a name="_airporttypeavailmask"><tt> 7710B+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
bit 0 set: small airports available for building
<br>bit 1 set: large airports available for building
<br>bit 2 set: heliports available for building

</td></tr>
<tr><td valign="top" nowrap=""><a name="_roadtrafficside"><tt> 7710C+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Side of road for vehicles to drive on:
<br>bit 4: clear&nbsp;=&nbsp;left, set&nbsp;=&nbsp;right
<br>bit 7 clear: cannot be changed by the player

</td></tr>
<tr><td valign="top" nowrap=""><a name="_townnamesstyle"><tt> 7710D+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Style of town names: 0&nbsp;=&nbsp;English, 1&nbsp;=&nbsp;French, 2&nbsp;=&nbsp;German, 3&nbsp;=&nbsp;American, 4&nbsp;=&nbsp;Latin-American, 5&nbsp;=&nbsp;Silly

</td></tr>
<tr><td valign="top" nowrap=""><a name="_nofcompetitors"><tt> 7710E+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Maximum number of AI competitors

</td></tr>
<tr><td valign="top" nowrap=""><a name="_competitorstarttime"><tt> 77110+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Competitor start time in quarters (relevant only at the game start)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_noftowns"><tt> 77112+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Number of towns: 0&nbsp;=&nbsp;low, 1&nbsp;=&nbsp;medium, 2&nbsp;=&nbsp;high (relevant only at the game start)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_nofindustries"><tt> 77114+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Number of industries: 0&nbsp;=&nbsp;low, 1&nbsp;=&nbsp;medium, 2&nbsp;=&nbsp;high (relevant only at the game start)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_maxinitloan"><tt> 77116+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Maximum initial loan in thousand pounds (relevant only at the game start, obviously)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_initinterestrate"><tt> 77118+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Initial interest rate in percent (relevant only at the game start, obviously)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_vehrunningcosts"><tt> 7711A+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Vehicle running costs: 0&nbsp;=&nbsp;low, 1&nbsp;=&nbsp;medium, 2&nbsp;=&nbsp;high (relevant only at the game start, non-obviously)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_AIconstrspeed"><tt> 7711C+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Construction speed of the AI: 0&nbsp;=&nbsp;very slow, 1&nbsp;=&nbsp;slow, 2&nbsp;=&nbsp;medium, 3&nbsp;=&nbsp;fast, 4&nbsp;=&nbsp;very fast

</td></tr>
<tr><td valign="top" nowrap=""><a name="_AIintelligence"><tt> 7711E+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
'Intelligence' of the AI: 0&nbsp;=&nbsp;low, 1&nbsp;=&nbsp;medium, 2&nbsp;=&nbsp;high

</td></tr>
<tr><td valign="top" nowrap=""><a name="_vehiclebreakdowns"><tt> 77120+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Vehicle breakdowns: 0&nbsp;=&nbsp;none, 1&nbsp;=&nbsp;reduced, 2&nbsp;=&nbsp;normal

</td></tr>
<tr><td valign="top" nowrap=""><a name="_subsidymultiplier"><tt> 77122+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Subsidy multiplier: 0&nbsp;=&nbsp;1.5x, 1&nbsp;=&nbsp;2x, 2&nbsp;=&nbsp;3x, 3&nbsp;=&nbsp;4x

</td></tr>
<tr><td valign="top" nowrap=""><a name="_costsofconstruction"><tt> 77124+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Costs of construction: 0&nbsp;=&nbsp;low, 1&nbsp;=&nbsp;medium, 2&nbsp;=&nbsp;high (relevant only at the game start)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_terraintype"><tt> 77126+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Terrain type: 0&nbsp;=&nbsp;very flat, 1&nbsp;=&nbsp;flat, 2&nbsp;=&nbsp;hilly, 3&nbsp;=&nbsp;mountainous (relevant only at the game start or in the scenario editor, obviously)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_quantityofwater"><tt> 77128+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Quantity of sea/lakes: 0&nbsp;=&nbsp;low, 1&nbsp;=&nbsp;medium, 2&nbsp;=&nbsp;high (relevant only at the game start or in the scenario editor, obviously)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_economy"><tt> 7712A+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Economy: 0&nbsp;=&nbsp;stable, 1&nbsp;=&nbsp;fluctuating

</td></tr>
<tr><td valign="top" nowrap=""><a name="_trainreversing"><tt> 7712C+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Train reversing: 0&nbsp;=&nbsp;at end of line and at stations, 1&nbsp;=&nbsp;at end of line only

</td></tr>
<tr><td valign="top" nowrap=""><a name="_disasters"><tt> 7712E+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Disasters: 0&nbsp;=&nbsp;off, 1&nbsp;=&nbsp;on

</td></tr>
<tr><td valign="top" nowrap=""><a name="_difficultylevel"><tt> 77130+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Difficulty level: 0&nbsp;=&nbsp;easy, 1&nbsp;=&nbsp;medium, 2&nbsp;=&nbsp;hard, 3&nbsp;=&nbsp;custom

</td></tr>
<tr><td valign="top" nowrap=""><a name="_climate"><tt> 77131+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Landscape style, a.k.a. climate: 0&nbsp;=&nbsp;temperate, 1&nbsp;=&nbsp;sub-arctic, 2&nbsp;=&nbsp;sub-tropical, 3&nbsp;=&nbsp;toyland

</td></tr>
<tr><td valign="top" nowrap=""><a name="_randomtreeplantcounter"><tt> 77132+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Decremented on every tick, when wraps around (i.e. every +256 ticks) TTD tries to plant a new tree on a randomly chosen tile (which succeeds only if that tile is bare land, grass, rough land or snow-covered land)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_vehiclenamesflags"><tt> 77133+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Names of vehicle types:
<br>bit 0: clear&nbsp;=&nbsp;default, set&nbsp;=&nbsp;custom
<br>bit 1 clear: cannot be changed in the options window (no custom names defined yet)

</td></tr>
<tr><td valign="top" nowrap=""><a name="_snowline"><tt> 77134+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B </tt></td><td>
Altitude of the snow line in the sub-arctic climate

</td></tr>
<tr><td valign="top" nowrap=""><a name="_randomindustrytypes"><tt> 77135+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[20] </tt></td><td>
List of random industry types.  Occasionally at the start of a new month TTD picks a type from this list at random and attempts to build a new industry of this type.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargounitweights"><tt> 77155+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[C] </tt></td><td>
Weights of 1 unit of each <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">cargo type</a>; <tt>10</tt>&nbsp;=&nbsp;1 tonne

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargodelaypenaltythresholds1"><tt> 77161+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[C] </tt></td><td>
First transit time thresholds for each <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">cargo type</a>

</td></tr>
<tr><td valign="top" nowrap=""><a name="_cargodelaypenaltythresholds2"><tt> 7716D+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[C] </tt></td><td>
Second transit time thresholds for each <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#CargoType">cargo type</a>
<p>
If <var>n</var> units of cargo are delivered over a distance of <var>dist</var> tiles in <var>t</var> units of time (a unit of time is +185 ticks, or ca. 2.5 days), then the payment is calculated as (C notation)
</p>
<p align="center">
<tt>((((<var>dist</var>/2) * <var>timefactor</var> * <var>n</var>) &gt;&gt; 7) * <var>cargopricefactor</var>) &gt;&gt; 13</tt>
</p>
<p>
where <var>cargopricefactor</var> is taken from the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_cargopricefactors">table at <tt>04C5A</tt></a>, and <var>timefactor</var> is calculated as (C notation again)
</p>
<pre><code>if (<var>t</var> &lt;= <var>T1</var>) <var>timefactor</var> = 255;
  else if (<var>t</var> &lt;= (<var>T1</var> + <var>T2</var>)) <var>timefactor</var> = 255 - (<var>t</var> - <var>T1</var>);
  else <var>timefactor</var> = 255 - (<var>t</var> - <var>T1</var>) - (<var>t</var> - <var>T1</var> - <var>T2</var>);

if (<var>timefactor</var> &lt; 31) <var>timefactor</var> = 31;</code>
</pre>
<p>
where <var>T1</var> and <var>T2</var> are the transit time thresholds for this cargo type. As a special case, there's no payment for transporting valuables over less than +10 tiles.
</p>
<p></p>
</td></tr>
<tr><td valign="top" nowrap=""><a name="_landscape4"><tt> 77179+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[10000] </tt></td><td>
The 'L4' landscape array. This holds the class of each tile in bits 7..4, and the height of the north corner in bits 3..0. See the section <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#Landscape">"Landscape"</a> for the list of classes and other details.

</td></tr>
<tr><td valign="top" nowrap=""><a name="_landscape5"><tt> 87179+X </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> B[10000] </tt></td><td>
The 'L5' landscape array. The meaning depends on the class of the tile. See the section <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#Landscape">"Landscape"</a> for details.

</td></tr>
<tr><td valign="top" nowrap=""><a name="extrachunks"><tt> 97179+X </tt></a></td>
<td align="left" valign="top" nowrap="">variable</td><td>
[TTDPatch] Extra chunks of data, if any.  The total number of extra chunks is stored at <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#ttdpatch.extrachunks">location <tt>44CB8</tt></a>.
<p>
Each chunk consists of a 6-byte header followed by variable-size contents.
</p>

<!-- structure description table: TTDPatch extra chunk header -->

<table>
<caption>TTDPatch extra chunk header format</caption>
<tbody><tr><th align="left">Offset&nbsp;</th><th align="left">Size&nbsp;</th><th align="left">Meaning</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td valign="top" nowrap=""><a name="extrachunkhdr.id"><tt> 0 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> W </tt></td><td>
Unique chunk type identifier.  As of TTDPatch 2.0 the following chunk identifiers are defined:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>0000</tt>&nbsp;&nbsp; </td><td align="left">TTD vehicle type data (cost multipliers, default maximum speeds, default cargo capacities, sprite sets etc.)</td></tr>
<tr><td nowrap="" valign="top"><tt>0001</tt>&nbsp; </td><td align="left">TTDPatch additional vehicle type data (e.g. powers and weights of road vehicles)</td></tr>
<tr><td nowrap="" valign="top"><tt>0002</tt>&nbsp; </td><td align="left">List of GRFIDs, i.e. identifiers of extra <samp>.GRF</samp> files (loaded by TTDPatch) used in the savegame</td></tr>
<tr><td nowrap="" valign="top"><tt>0003</tt>&nbsp; </td><td align="left">TTDPatch version and configuration (the format is version-specific)</td></tr>
<tr><td nowrap="" valign="top"><tt>8000</tt>&nbsp; </td><td align="left">Extended town data</td></tr>
</tbody></table>
If bit 15 of the chunk identifier is clear, the chunk is <dfn>optional</dfn>, i.e. it is possible to play the game without loading it. If bit 15 is set, the chunk is <dfn>mandatory</dfn>, i.e. it contains data required for the game to work.

</td></tr>
<tr><td valign="top" nowrap=""><a name="extrachunkhdr.length"><tt> 2 </tt></a></td>
<td align="left" valign="top" nowrap=""><tt> L </tt></td><td>
Length of the chunk contents after the header, in bytes

</td></tr>
</tbody></table>

<!-- end of structure description table: TTDPatch extra chunk header -->

<p>
The extra chunks were introduced in TTDPatch version 1.9.1 alpha 32.
</p>
</td></tr>
</tbody></table>


<!-- ************************* Landscape ************************* -->
<hr>


<h3><a name="Landscape">Landscape</a></h3>
<p>
Five arrays are used to encode the information of the contents of each tile. These arrays are referred to as <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape1">L1</a>, <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape2">L2</a>, <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape3">L3</a>, <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape4">L4</a> and <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape5">L5</a>. The known encodings are listed in the table below. The most important value is the class of a tile, stored in the upper 4 bits of the L4 array.
</p>
<p>
<a name="OwnershipInfo">Owner values</a> <tt>00</tt> through <tt>07</tt> are companies (they're indices into the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_CompanyArray">array of companies</a>), <tt>10</tt> is no owner, <tt>11</tt> appears to be reserved for water, <tt>80</tt> and above are towns (in this case the low 7 bits contain an index into the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_TownArray">town array</a>).
</p>
<p>
TTD's class-specific periodic tile processing routine is called once every +256 ticks for each tile.
</p>

<table border="1" cellpadding="3">
<tbody><tr><th align="left">Class</th><th align="left">Meaning &amp; details of encoding</th></tr>

<tr><td valign="top" nowrap=""><a name="Class0"><tt> 0 </tt></a></td><td>
<ul>
<li>L5 bits 4..0: tile type:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td align="left">bare land</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>&nbsp; </td><td align="left">1/3 grass</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>&nbsp; </td><td align="left">2/3 grass</td></tr>
<tr><td nowrap="" valign="top"><tt>03</tt>&nbsp; </td><td align="left">full grass</td></tr>
<tr><td nowrap="" valign="top"><tt>07</tt>&nbsp; </td><td align="left">rough land</td></tr>
<tr><td nowrap="" valign="top"><tt>0B</tt>&nbsp; </td><td align="left">rocks</td></tr>
<tr><td nowrap="" valign="top"><tt>0F</tt>&nbsp; </td><td align="left">fields; type of fields in L3 bits 3..0 (legal values: 0 through 9)</td></tr>
<tr><td nowrap="" valign="top"><tt>10</tt>&nbsp; </td><td align="left">1/4 snow</td></tr>
<tr><td nowrap="" valign="top"><tt>11</tt>&nbsp; </td><td align="left">2/4 snow</td></tr>
<tr><td nowrap="" valign="top"><tt>12</tt>&nbsp; </td><td align="left">3/4 snow</td></tr>
<tr><td nowrap="" valign="top"><tt>13</tt>&nbsp; </td><td align="left">full snow</td></tr>
<tr><td nowrap="" valign="top"><tt>15</tt>&nbsp; </td><td align="left">partial desert</td></tr>
<tr><td nowrap="" valign="top"><tt>17</tt>&nbsp; </td><td align="left">full desert</td></tr>
</tbody></table>
</li>
<li>L5 bits 7..5: update counter, incremented on every periodic processing for tile types other than <tt>03</tt>, <tt>07</tt>, <tt>0B</tt> and <tt>10</tt> and above, on wraparound the tile is updated (for fields, the type of fields in L3 is increased, for other types the tile type in L5 is increased)
<br>(for snow and desert, these bits are not used, tile is updated on every periodic processing)
</li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the tile (normally <tt>10</tt>)
</li>
<li>L3 bits 15..13: type of hedge on the SW border of the tile (1 through 6, or 0=none); bits 12..10: same for the SE border
</li>
</ul>
</td></tr>

<tr><td valign="top" nowrap=""><a name="Class1"><tt> 1 </tt></a></td><td>
L5 bit 7 clear: railway track
<ul>
<li>L5 bits 0..5: track layout: bit set = track present:
<table>
<tbody><tr><td nowrap="" valign="top">bit 0: </td><td align="left">in the X direction</td></tr>
<tr><td nowrap="" valign="top">bit 1: </td><td align="left">in the Y direction</td></tr>
<tr><td nowrap="" valign="top">bit 2: </td><td align="left">in the north corner (direction W-E)</td></tr>
<tr><td nowrap="" valign="top">bit 3: </td><td align="left">in the south corner (direction W-E)</td></tr>
<tr><td nowrap="" valign="top">bit 4: </td><td align="left">in the west corner (direction N-S)</td></tr>
<tr><td nowrap="" valign="top">bit 5: </td><td align="left">in the east corner (direction N-S)</td></tr>
</tbody></table></li>
<li>L5 bit 6 set = with signals:
<ul>
<li>L3 bits 7..4: bit set = signal present:
<ul>
<li>For track in the X direction:
<table>
<tbody><tr><td nowrap="" valign="top">bit 6: </td><td align="left">signal in the SW direction</td></tr>
<tr><td nowrap="" valign="top">bit 7: </td><td align="left">signal in the NE direction</td></tr>
</tbody></table></li>
<li>For track in the Y direction:
<table>
<tbody><tr><td nowrap="" valign="top">bit 6: </td><td align="left">signal in the NW direction</td></tr>
<tr><td nowrap="" valign="top">bit 7: </td><td align="left">signal in the SE direction</td></tr>
</tbody></table></li>
<li>For tracks in the W-E direction:
<table>
<tbody><tr><td nowrap="" valign="top">bit 4: </td><td align="left">signal in the W direction on the track in the S corner</td></tr>
<tr><td nowrap="" valign="top">bit 5: </td><td align="left">signal in the E direction on the track in the S corner</td></tr>
<tr><td nowrap="" valign="top">bit 6: </td><td align="left">signal in the W direction on the track in the N corner</td></tr>
<tr><td nowrap="" valign="top">bit 7: </td><td align="left">signal in the E direction on the track in the N corner</td></tr>
</tbody></table></li>
<li>For tracks in the N-S direction:
<table>
<tbody><tr><td nowrap="" valign="top">bit 4: </td><td align="left">signal in the S direction on the track in the E corner</td></tr>
<tr><td nowrap="" valign="top">bit 5: </td><td align="left">signal in the N direction on the track in the E corner</td></tr>
<tr><td nowrap="" valign="top">bit 6: </td><td align="left">signal in the S direction on the track in the W corner</td></tr>
<tr><td nowrap="" valign="top">bit 7: </td><td align="left">signal in the N direction on the track in the W corner</td></tr>
</tbody></table></li>
</ul></li>
<li>L2 bits 7..4: bit clear = signal shows red; same bits as in L3</li>
<li>TTDPatch bits in L3:
<table>
<tbody><tr><td nowrap="" valign="top">bit 8: </td><td align="left">set if pre-signal bits are valid (used for automatic pre-signal setups)</td></tr>
<tr><td nowrap="" valign="top">bit 9: </td><td align="left">set for pre-signals and combo signals</td></tr>
<tr><td nowrap="" valign="top">bit 10: </td><td align="left">set for exit signals and combo signals</td></tr>
<tr><td nowrap="" valign="top">bit 11: </td><td align="left">set = semaphore signals, clear = light signals</td></tr>
<tr><td nowrap="" valign="top">bit 15: </td><td align="left">set = manual pre-signal setup</td></tr>
</tbody></table></li>
</ul></li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the track
</li>
<li>L2 bits 0..3:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>0</tt>&nbsp; </td><td align="left">on bare land</td></tr>
<tr><td nowrap="" valign="top"><tt>1</tt>&nbsp; </td><td align="left">on grass, no fences</td></tr>
<tr><td nowrap="" valign="top"><tt>2</tt>&nbsp; </td><td align="left">fence on the NW side</td></tr>
<tr><td nowrap="" valign="top"><tt>3</tt>&nbsp; </td><td align="left">fence on the SE side</td></tr>
<tr><td nowrap="" valign="top"><tt>4</tt>&nbsp; </td><td align="left">fences on the NW and SE sides</td></tr>
<tr><td nowrap="" valign="top"><tt>5</tt>&nbsp; </td><td align="left">fence on the NE side</td></tr>
<tr><td nowrap="" valign="top"><tt>6</tt>&nbsp; </td><td align="left">fence on the SW side</td></tr>
<tr><td nowrap="" valign="top"><tt>7</tt>&nbsp; </td><td align="left">fences on the NE and SW sides</td></tr>
<tr><td nowrap="" valign="top"><tt>8</tt>&nbsp; </td><td align="left">fence on the E side (track in the W corner)</td></tr>
<tr><td nowrap="" valign="top"><tt>9</tt>&nbsp; </td><td align="left">fence on the W side (track in the E corner)</td></tr>
<tr><td nowrap="" valign="top"><tt>A</tt>&nbsp; </td><td align="left">fence on the S side (track in the N corner)</td></tr>
<tr><td nowrap="" valign="top"><tt>B</tt>&nbsp; </td><td align="left">fence on the N side (track in the S corner)</td></tr>
<tr><td nowrap="" valign="top"><tt>C</tt>&nbsp; </td><td align="left">on snow or desert</td></tr>
</tbody></table></li>
<li>L3 bits 0..3 = <a name="TrackType">track type</a>: <tt>0</tt> - conventional railway, <tt>1</tt> - monorail, <tt>2</tt> - maglev
</li>
</ul>
L5 bits 7 and 6 set: railway depot
<ul>
<li>L5 bits 5..0 - direction: exit towards: <tt>00</tt> = NE, <tt>01</tt> = SE, <tt>02</tt> = SW, <tt>03</tt> = NW</li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the depot</li>
<li>L3 bits 0..3 = <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#TrackType">track type</a></li>
</ul>
</td></tr>

<tr><td valign="top" nowrap=""><a name="Class2"><tt> 2 </tt></a></td><td>
L5 bits 7..4 clear: road
<ul>
<li>L5 bits 3..0: road layout: bit set = road piece present:
<table>
<tbody><tr><td nowrap="" valign="top">bit 0: </td><td align="left">NW piece</td></tr>
<tr><td nowrap="" valign="top">bit 1: </td><td align="left">SW piece</td></tr>
<tr><td nowrap="" valign="top">bit 2: </td><td align="left">SE piece</td></tr>
<tr><td nowrap="" valign="top">bit 3: </td><td align="left">NE piece</td></tr>
</tbody></table></li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the road</li>
<li>L2 bits 0..2: <tt>0</tt> - on bare land, <tt>1</tt> - on grass, <tt>2</tt> - paved, <tt>3</tt> - with streetlights, <tt>5</tt> - tree-lined, <tt>6</tt> - on grass with road works, <tt>7</tt> - paved with road works</li>
<li>L3 bit 15 set = on snow or desert</li>
</ul>
L5 bit 4 set, bits 7..5 clear: level crossing
<ul>
<li>L5 bit 3: clear - road in the X direction, set - road in the Y direction (railway track always perpendicular)</li>
<li>L5 bit 2: set if crossing lights are on</li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the railway track</li>
<li>L2 bits 0..2: <tt>0</tt> - on bare land, <tt>1</tt> - on grass, <tt>2</tt> or higher - paved</li>
<li>L3 bits 0..7: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the road</li>
<li>L3 bits 11..8: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#TrackType">track type</a></li>
<li>L3 bit 15 set = on snow or desert</li>
</ul>
L5 bit 5 set: road depot
<ul>
<li>L5 bits 3..0 - direction: exit towards: <tt>0</tt> = NE, <tt>1</tt> = SE, <tt>2</tt> = SW, <tt>3</tt> = NW</li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the depot</li>
<li>L3 bit 15 set = on snow or desert (not displayed, but set internally)</li>
</ul>
</td></tr>

<tr><td valign="top" nowrap=""><a name="Class3"><tt> 3 </tt></a></td><td>
Town building
<ul>
<li>L2: <a name="HouseTypes">town building type</a>:
<p><small>Note: In the climate list, 'sub-arctic' means below the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_snowline">snow line</a>, and 'snow' means above the snow line in the sub-arctic climate.</small></p>
<table>
<tbody><tr><th align="left">Type&nbsp;</th><th align="left">Size&nbsp;</th><th align="left">Climates&nbsp;</th><th align="left">Description</th></tr>
<tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">office block</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">small block of flats</td></tr>
<tr><td nowrap="" valign="top"><tt>03</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">church</td></tr>
<tr><td nowrap="" valign="top"><tt>04</tt>&nbsp; </td><td>11</td><td>temperate, sub-arctic, sub-tropical</td><td align="left">large office block</td></tr>
<tr><td nowrap="" valign="top"><tt>05</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">large office block</td></tr>
<tr><td nowrap="" valign="top"><tt>06</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">town houses</td></tr>
<tr><td nowrap="" valign="top"><tt>07</tt>..<tt>08</tt>&nbsp; </td><td>12</td><td>temperate</td><td align="left">hotel</td></tr>
<tr><td nowrap="" valign="top"><tt>09</tt>&nbsp; </td><td>11</td><td>temperate, sub-arctic, sub-tropical&nbsp;&nbsp;</td><td align="left">statue</td></tr>
<tr><td nowrap="" valign="top"><tt>0A</tt>&nbsp; </td><td>11</td><td>temperate, sub-arctic, sub-tropical</td><td align="left">fountain</td></tr>
<tr><td nowrap="" valign="top"><tt>0B</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">park (with a pond)</td></tr>
<tr><td nowrap="" valign="top"><tt>0C</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">park (with an alley)</td></tr>
<tr><td nowrap="" valign="top"><tt>0D</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">office block</td></tr>
<tr><td nowrap="" valign="top"><tt>0E</tt>..<tt>10</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">various types of shops and offices</td></tr>
<tr><td nowrap="" valign="top"><tt>11</tt>&nbsp; </td><td>11</td><td>temperate, sub-arctic, sub-tropical</td><td align="left">modern office building</td></tr>
<tr><td nowrap="" valign="top"><tt>12</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">warehouse</td></tr>
<tr><td nowrap="" valign="top"><tt>13</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">office block (with spiral stairway on the side)</td></tr>
<tr><td nowrap="" valign="top"><tt>14</tt>..<tt>17</tt>&nbsp; </td><td>22</td><td>temperate</td><td align="left">stadium</td></tr>
<tr><td nowrap="" valign="top"><tt>18</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">old houses</td></tr>
<tr><td nowrap="" valign="top"><tt>19</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">cottages</td></tr>
<tr><td nowrap="" valign="top"><tt>1A</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>1B</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">flats</td></tr>
<tr><td nowrap="" valign="top"><tt>1C</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>1D</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">shops and offices</td></tr>
<tr><td nowrap="" valign="top"><tt>1E</tt>&nbsp; </td><td>11</td><td>temperate, sub-tropical</td><td align="left">shops and offices</td></tr>
<tr><td nowrap="" valign="top"><tt>1F</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">theatre</td></tr>
<tr><td nowrap="" valign="top"><tt>20</tt>..<tt>23</tt>&nbsp; </td><td>22</td><td>temperate, sub-arctic, sub-tropical</td><td align="left">stadium (modern style)</td></tr>
<tr><td nowrap="" valign="top"><tt>24</tt>&nbsp; </td><td>11</td><td>temperate, sub-arctic, sub-tropical</td><td align="left">offices (the modern 'vertical tube' style)</td></tr>
<tr><td nowrap="" valign="top"><tt>25</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>26</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>27</tt>&nbsp; </td><td>11</td><td>temperate</td><td align="left">cinema</td></tr>
<tr><td nowrap="" valign="top"><tt>28</tt>..<tt>2B</tt>&nbsp; </td><td>22</td><td>temperate</td><td align="left">shopping mall</td></tr>
<tr><td nowrap="" valign="top"><tt>2C</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">flats</td></tr>
<tr><td nowrap="" valign="top"><tt>2D</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">flats</td></tr>
<tr><td nowrap="" valign="top"><tt>2E</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>2F</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>30</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>31</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>32</tt>&nbsp; </td><td>11</td><td>sub-arctic, sub-tropical</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>33</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>34</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>35</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>36</tt>&nbsp; </td><td>11</td><td>sub-arctic, sub-tropical</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>37</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>38</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>39</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>3A</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">shops and offices</td></tr>
<tr><td nowrap="" valign="top"><tt>3B</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">shops and offices</td></tr>
<tr><td nowrap="" valign="top"><tt>3C</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">church</td></tr>
<tr><td nowrap="" valign="top"><tt>3D</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">church</td></tr>
<tr><td nowrap="" valign="top"><tt>3E</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>3F</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>40</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">shops and offices</td></tr>
<tr><td nowrap="" valign="top"><tt>41</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">shops and offices</td></tr>
<tr><td nowrap="" valign="top"><tt>42</tt>..<tt>43</tt>&nbsp; </td><td>12</td><td>sub-arctic</td><td align="left">hotel</td></tr>
<tr><td nowrap="" valign="top"><tt>44</tt>..<tt>45</tt>&nbsp; </td><td>12</td><td>snow</td><td align="left">hotel</td></tr>
<tr><td nowrap="" valign="top"><tt>46</tt>&nbsp; </td><td>11</td><td>sub-arctic, sub-tropical</td><td align="left">shops and offices</td></tr>
<tr><td nowrap="" valign="top"><tt>47</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">shops and offices</td></tr>
<tr><td nowrap="" valign="top"><tt>48</tt>&nbsp; </td><td>11</td><td>sub-arctic</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>49</tt>&nbsp; </td><td>11</td><td>snow</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>4A</tt>..<tt>4B</tt>&nbsp; </td><td>21</td><td>sub-arctic</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>4C</tt>..<tt>4D</tt>&nbsp; </td><td>21</td><td>snow</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>4E</tt>&nbsp; </td><td>11</td><td>sub-tropical</td><td align="left">houses (with a tree in a corner)</td></tr>
<tr><td nowrap="" valign="top"><tt>4F</tt>, <tt>50</tt>&nbsp; </td><td>11</td><td>sub-tropical</td><td align="left">houses</td></tr>
<tr><td nowrap="" valign="top"><tt>51</tt>&nbsp; </td><td>11</td><td>sub-tropical</td><td align="left">houses (suburb-type)</td></tr>
<tr><td nowrap="" valign="top"><tt>52</tt>&nbsp; </td><td>11</td><td>sub-tropical</td><td align="left">flats</td></tr>
<tr><td nowrap="" valign="top"><tt>53</tt>&nbsp; </td><td>11</td><td>sub-tropical</td><td align="left">church</td></tr>
<tr><td nowrap="" valign="top"><tt>54</tt>&nbsp; </td><td>11</td><td>sub-tropical</td><td align="left">houses (with two trees in front)</td></tr>
<tr><td nowrap="" valign="top"><tt>55</tt>, <tt>56</tt>&nbsp; </td><td>11</td><td>sub-tropical</td><td align="left">flats</td></tr>
<tr><td nowrap="" valign="top"><tt>57</tt>..<tt>58</tt>&nbsp; </td><td>21</td><td>sub-tropical</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>59</tt>&nbsp; </td><td>11</td><td>sub-tropical</td><td align="left">flats</td></tr>
<tr><td nowrap="" valign="top"><tt>5A</tt>&nbsp; </td><td>11</td><td>sub-tropical</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>5B</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">church</td></tr>
<tr><td nowrap="" valign="top"><tt>5C</tt>..<tt>61</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">various types of toyland houses</td></tr>
<tr><td nowrap="" valign="top"><tt>62</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>63</tt>..<tt>64</tt>&nbsp; </td><td>12</td><td>toyland</td><td align="left">houses ('shoe' style)</td></tr>
<tr><td nowrap="" valign="top"><tt>65</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>66</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">igloo</td></tr>
<tr><td nowrap="" valign="top"><tt>67</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">tepees</td></tr>
<tr><td nowrap="" valign="top"><tt>68</tt>, <tt>69</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">shops and offices</td></tr>
<tr><td nowrap="" valign="top"><tt>6A</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">tall office block</td></tr>
<tr><td nowrap="" valign="top"><tt>6B</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">statue</td></tr>
<tr><td nowrap="" valign="top"><tt>6C</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">teapot-house</td></tr>
<tr><td nowrap="" valign="top"><tt>6D</tt>&nbsp; </td><td>11</td><td>toyland</td><td align="left">piggy-bank</td></tr>
<tr><td colspan="2"></td></tr> <!-- spacer -- -- (and I don't mean a walk) -->
</tbody></table></li>
<li>L3 bits 7..6: stage of construction (<tt>3</tt> = completed)</li>
<li>L5 bits 2..0: construction counter, for buildings under construction incremented on every periodic tile processing, on wraparound the stage of construction in L3 is increased</li>
<li>for large office blocks (types <tt>04</tt> and <tt>05</tt>):
<ul>
<li>L1 bits 6..0: position of the lift</li>
<li>L1 bit 7: if set the lift is moving</li>
<li>L5 bit 7: if set then L5 bits 5..0 hold the final position of the lift divided by 6 (valid values 0..6 except 1)</li>
</ul></li>
</ul>
</td></tr>

<tr><td valign="top" nowrap=""><a name="Class4"><tt> 4 </tt></a></td><td>
Trees
<ul>
<li>L5 bits 7..6: number of trees minus one</li>
<li>L5 bits 2..0: growth status: <tt>0</tt>..<tt>2</tt> - one of trees is growing, <tt>3</tt> - all trees are fully grown, <tt>4</tt>..<tt>6</tt> - one of trees is withering</li>
<li>L3 bits 7..0: type of trees:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>..<tt>0B</tt>&nbsp; </td><td align="left">temperate climate trees</td></tr>
<tr><td nowrap="" valign="top"><tt>0C</tt>..<tt>13</tt>&nbsp; </td><td align="left">sub-arctic climate trees</td></tr>
<tr><td nowrap="" valign="top"><tt>14</tt>..<tt>1A</tt>&nbsp; </td><td align="left">rainforest trees</td></tr>
<tr><td nowrap="" valign="top"><tt>1B</tt> </td><td align="left">cactus plants</td></tr>
<tr><td nowrap="" valign="top"><tt>1C</tt>..<tt>1F</tt>&nbsp; </td><td align="left">sub-tropical climate, non-rainforest, non-desert trees</td></tr>
<tr><td nowrap="" valign="top"><tt>20</tt>..<tt>28</tt>&nbsp; </td><td align="left">toyland trees</td></tr>
</tbody></table>
(note: the actually displayed set of trees depends on both type and number of trees)
</li>
<li>L3 bits 15..13: type of hedge on the SW border of the tile (1 through 6, or 0=none)</li>
<li>L3 bits 12..10: type of hedge on the SE border of the tile (1 through 6, or 0=none)</li>
<li>L2 bits 5..4:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>0</tt>&nbsp; </td><td align="left">on grass</td></tr>
<tr><td nowrap="" valign="top"><tt>1</tt>&nbsp; </td><td align="left">on rough land</td></tr>
<tr><td nowrap="" valign="top"><tt>2</tt>&nbsp; </td><td align="left">on snow or desert; L2 bits 7..6 - amount of snow or desert (for desert always set to 3 in TTD)
</td></tr>
</tbody></table></li>
<li>L2 bits 3..0: update counter, incremented on every periodic processing, on wraparound the growth status is updated (or, if it's <tt>3</tt>, a random action is taken)</li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> (normally <tt>10</tt>)</li>
</ul>
</td></tr>

<tr><td valign="top" nowrap=""><a name="Class5"><tt> 5 </tt></a></td><td>
Station tile
<ul>
<li>L5: tile type:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>..<tt>07</tt>&nbsp; </td><td align="left">railway station
<br><tt>00</tt>..<tt>01</tt> - open platform, <tt>02</tt>..<tt>03</tt> - open platform with station building, <tt>04</tt>....<tt>07</tt> - roofed platform
<br>bit 0: clear = in X direction, set = in Y direction
</td></tr>
<tr><td nowrap="" valign="top"><tt>08</tt>..<tt>33</tt>&nbsp; </td><td align="left">large airport
<table>
<tbody><tr><td nowrap="" valign="top"><tt>0B</tt>&nbsp; </td><td align="left">pad 1</td></tr>
<tr><td nowrap="" valign="top"><tt>16</tt>..<tt>19</tt>&nbsp; </td><td align="left">runway middle</td></tr>
<tr><td nowrap="" valign="top"><tt>1A</tt>&nbsp; </td><td align="left">runway ending</td></tr>
<tr><td nowrap="" valign="top"><tt>1C</tt>&nbsp; </td><td align="left">control tower</td></tr>
<tr><td nowrap="" valign="top"><tt>20</tt>&nbsp; </td><td align="left">hangar</td></tr>
<tr><td nowrap="" valign="top"><tt>21</tt>&nbsp; </td><td align="left">pad 3</td></tr>
<tr><td nowrap="" valign="top"><tt>22</tt>&nbsp; </td><td align="left">pad 2</td></tr>
<tr><td nowrap="" valign="top"><tt>27</tt>..<tt>32</tt>&nbsp; </td><td align="left">radar (animated)</td></tr>
<tr><td nowrap="" valign="top"><tt>33</tt>&nbsp; </td><td align="left">transmitter</td></tr>
</tbody></table>
The initial layout of a large airport is (rows in Y direction, columns in X direction):
<pre>1F 1B 1E 33 26 1A
09 24 0B 0C 0D 16
21 1D 23 0E 0F 17
09 22 0D 11 10 18
09 08 14 13 12 19
20 0A 15 1C 27 1A
</pre>
</td></tr>
<tr><td nowrap="" valign="top"><tt>34</tt>..<tt>41</tt>&nbsp; </td><td align="left">small airport
<table>
<tbody><tr><td nowrap="" valign="top"><tt>3A</tt>..<tt>3D</tt>&nbsp; </td><td align="left">field with the wind meter (animated)</td></tr>
<tr><td nowrap="" valign="top"><tt>3E</tt>&nbsp; </td><td align="left">runway south ending</td></tr>
<tr><td nowrap="" valign="top"><tt>3F</tt>&nbsp; </td><td align="left">runway middle</td></tr>
<tr><td nowrap="" valign="top"><tt>40</tt>&nbsp; </td><td align="left">runway north ending</td></tr>
<tr><td nowrap="" valign="top"><tt>41</tt>&nbsp; </td><td align="left">hangar</td></tr>
</tbody></table>
The initial layout of a small airport is (rows in Y direction, columns in X direction):
<pre>36 3A 40
35 39 3F
34 38 3F
41 37 3E
</pre>
</td></tr>
<tr><td nowrap="" valign="top"><tt>42</tt> </td><td align="left">heliport</td></tr>
<tr><td nowrap="" valign="top"><tt>43</tt>..<tt>46</tt>&nbsp; </td><td align="left">lorry loading area;
exit towards: <tt>43</tt> - NE, <tt>44</tt> - SE, <tt>45</tt> - SW, <tt>46</tt> - NW
</td></tr>
<tr><td nowrap="" valign="top"><tt>47</tt>..<tt>4A</tt>&nbsp; </td><td align="left">bus station;
exit towards: <tt>47</tt> - NE, <tt>48</tt> - SE, <tt>49</tt> - SW, <tt>4A</tt> - NW
</td></tr><tr><td nowrap="" valign="top"><tt>4B</tt> </td><td align="left">oilfield</td></tr>
<tr><td nowrap="" valign="top"><tt>4C</tt>..<tt>51</tt>&nbsp; </td><td align="left">ship dock;
<tt>4C</tt> - SW coast part, <tt>4D</tt> - NW coast part, <tt>4E</tt> - NE coast part, <tt>4F</tt> - SE coast part, <tt>50</tt> - X direction water part, <tt>51</tt> - Y direction water part
</td></tr><tr><td nowrap="" valign="top"><tt>52</tt> </td><td align="left">buoy</td></tr>
<tr><td colspan="2"></td></tr> <!-- spacer -->
</tbody></table>
</li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the station</li>
<li>L2: index into the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_StationArray">array of stations</a></li>
<li>L3 bits 0..3: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#TrackType">track type</a> for railway stations, must be 0 for all the other stations</li>
</ul>
</td></tr>

<tr><td valign="top" nowrap=""><a name="Class6"><tt> 6 </tt></a></td><td>
<ul>
<li>L5: tile type:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td align="left">water</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>&nbsp; </td><td align="left">coast or riverbank</td></tr>
<tr><td nowrap="" valign="top"><tt>80</tt>&nbsp; </td><td align="left">ship depot, NE part (X direction)
</td></tr><tr><td nowrap="" valign="top"><tt>81</tt>&nbsp; </td><td align="left">ship depot, SW part (X direction)
</td></tr><tr><td nowrap="" valign="top"><tt>82</tt>&nbsp; </td><td align="left">ship depot, NW part (Y direction)
</td></tr><tr><td nowrap="" valign="top"><tt>83</tt>&nbsp; </td><td align="left">ship depot, SE part (Y direction)
</td></tr>
</tbody></table></li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> (for water and coasts normally <tt>11</tt>)</li>
</ul>
</td></tr>

<tr><td valign="top" nowrap=""><a name="Class7"><tt> 7 </tt></a></td><td>
Void
<p>
Tiles of this class form an invisible, one tile wide border at the south (bottom) edges of the map, so as to protect several algorithms from the consequences of a wraparound at the edges.
</p>
</td></tr>

<tr><td valign="top" nowrap=""><a name="Class8"><tt> 8 </tt></a></td><td>
Industry tile
<ul>
<li>L5: type:
<br><small>(note: this is not the same as the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#industry.type">industry type</a> stored in the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_IndustryArray">array of industries</a>)</small>
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>..<tt>06</tt>&nbsp; </td><td align="left">coal mine
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td align="left">wheel tower when not animated</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>&nbsp; </td><td align="left">wheel tower when animated; animation state in L1 bits 5..0; L1 bit 6 set = sound already generated</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>07</tt>..<tt>0A</tt>&nbsp; </td><td align="left">power station
<table>
<tbody><tr><td nowrap="" valign="top"><tt>08</tt>&nbsp; </td><td align="left">chimney</td></tr>
<tr><td nowrap="" valign="top"><tt>0A</tt>&nbsp; </td><td align="left">transformer; animation progress in L1 bits 5..2 (valid range <tt>0</tt>..<tt>7</tt>)</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>0B</tt>..<tt>0F</tt>&nbsp; </td><td align="left">sawmill</td></tr>
<tr><td nowrap="" valign="top"><tt>10</tt>..<tt>11</tt>&nbsp; </td><td align="left">forest
<table>
<tbody><tr><td nowrap="" valign="top"><tt>11</tt>&nbsp; </td><td align="left">trees cut down</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>12</tt>..<tt>17</tt>&nbsp; </td><td align="left">oil refinery</td></tr>
<tr><td nowrap="" valign="top"><tt>18</tt>..<tt>1C</tt>&nbsp; </td><td align="left">oil rig</td></tr>
<tr><td nowrap="" valign="top"><tt>1D</tt>..<tt>20</tt>&nbsp; </td><td align="left">oil wells
<table>
<tbody><tr><td nowrap="" valign="top"><tt>1D</tt>&nbsp; </td><td align="left">not animated</td></tr>
<tr><td nowrap="" valign="top"><tt>1E</tt>..<tt>20</tt>&nbsp; </td><td align="left">various stages of animation; progress of animation in L1 bits 1..0</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>21</tt>..<tt>26</tt>&nbsp; </td><td align="left">farm</td></tr>
<tr><td nowrap="" valign="top"><tt>27</tt>..<tt>2A</tt>&nbsp; </td><td align="left">factory (temperate climate)</td></tr>
<tr><td nowrap="" valign="top"><tt>2B</tt>..<tt>2E</tt>&nbsp; </td><td align="left">printing works</td></tr>
<tr><td nowrap="" valign="top"><tt>2F</tt>..<tt>33</tt>&nbsp; </td><td align="left">copper ore mine
<table>
<tbody><tr><td nowrap="" valign="top"><tt>2F</tt>&nbsp; </td><td align="left">wheel tower when not animated</td></tr>
<tr><td nowrap="" valign="top"><tt>30</tt>&nbsp; </td><td align="left">wheel tower when animated; animation state in L1 bits 5..0; L1 bit 6 set = sound already generated</td></tr>
<tr><td nowrap="" valign="top"><tt>31</tt>&nbsp; </td><td align="left">chimney</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>34</tt>..<tt>39</tt>&nbsp; </td><td align="left">steel mill</td></tr>
<tr><td nowrap="" valign="top"><tt>3A</tt>..<tt>3B</tt>&nbsp; </td><td align="left">bank (temperate climate)</td></tr>
<tr><td nowrap="" valign="top"><tt>3C</tt>..<tt>3F</tt>&nbsp; </td><td align="left">food processing plant</td></tr>
<tr><td nowrap="" valign="top"><tt>40</tt>..<tt>47</tt>&nbsp; </td><td align="left">paper mill</td></tr>
<tr><td nowrap="" valign="top"><tt>48</tt>..<tt>58</tt>&nbsp; </td><td align="left">gold mine
<table>
<tbody><tr><td nowrap="" valign="top"><tt>4F</tt>&nbsp; </td><td align="left">wheel tower when not animated</td></tr>
<tr><td nowrap="" valign="top"><tt>58</tt>&nbsp; </td><td align="left">wheel tower when animated; animation state in L1 bits 5..0; L1 bit 6 set = sound already generated</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>59</tt>..<tt>5A</tt>&nbsp; </td><td align="left">bank (sub-arctic or sub-tropical climate)</td></tr>
<tr><td nowrap="" valign="top"><tt>5B</tt>..<tt>63</tt>&nbsp; </td><td align="left">diamond mine</td></tr>
<tr><td nowrap="" valign="top"><tt>64</tt>..<tt>73</tt>&nbsp; </td><td align="left">iron ore mine</td></tr>
<tr><td nowrap="" valign="top"><tt>74</tt></td><td align="left">fruit plantation</td></tr>
<tr><td nowrap="" valign="top"><tt>75</tt></td><td align="left">rubber plantation</td></tr>
<tr><td nowrap="" valign="top"><tt>76</tt>..<tt>77</tt>&nbsp; </td><td align="left">water supply</td></tr>
<tr><td nowrap="" valign="top"><tt>78</tt></td><td align="left">water tower</td></tr>
<tr><td nowrap="" valign="top"><tt>79</tt>..<tt>7C</tt>&nbsp; </td><td align="left">factory (sub-tropical climate)</td></tr>
<tr><td nowrap="" valign="top"><tt>7D</tt>..<tt>80</tt>&nbsp; </td><td align="left">lumber mill</td></tr>
<tr><td nowrap="" valign="top"><tt>81</tt>..<tt>82</tt>&nbsp; </td><td align="left">candyfloss forest
<table>
<tbody><tr><td nowrap="" valign="top"><tt>82</tt>&nbsp; </td><td align="left">candyfloss 'trees' cut down</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>83</tt>..<tt>86</tt>&nbsp; </td><td align="left">sweet factory</td></tr>
<tr><td nowrap="" valign="top"><tt>87</tt>..<tt>88</tt>&nbsp; </td><td align="left">battery farm
<table>
<tbody><tr><td nowrap="" valign="top"><tt>88</tt>&nbsp; </td><td align="left">batteries 'reaped'</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>89</tt></td><td align="left">cola wells</td></tr>
<tr><td nowrap="" valign="top"><tt>8A</tt>..<tt>8D</tt>&nbsp; </td><td align="left">toy shop</td></tr>
<tr><td nowrap="" valign="top"><tt>8E</tt>..<tt>93</tt>&nbsp; </td><td align="left">toy factory
<table>
<tbody><tr><td nowrap="" valign="top"><tt>8F</tt>&nbsp; </td><td align="left">animated part; animation state in the low byte of L3 (valid range <tt>00</tt>..<tt>31</tt>)<br>
tile animation is started (the high byte of L3 zeroed) on the periodic processing if <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#industry.didtransform">field <tt>2C</tt></a> in the corresponding industry array entry is nonzero<br>
while the animation is in progress (see the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_AnimatedTilesList">array at <tt>04328</tt></a>) the high byte of L3 holds the number of animation cycles that have already taken place; when this number reaches 8 the animation is stopped</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>94</tt>..<tt>9B</tt>&nbsp; </td><td align="left">plastic fountains (various stages of cyclic animation)</td></tr>
<tr><td nowrap="" valign="top"><tt>9C</tt>..<tt>9F</tt>&nbsp; </td><td align="left">fizzy drink factory</td></tr>
<tr><td nowrap="" valign="top"><tt>A0</tt>..<tt>A3</tt>&nbsp; </td><td align="left">bubble generator
<table>
<tbody><tr><td nowrap="" valign="top"><tt>A1</tt>&nbsp; </td><td align="left">generators</td></tr>
<tr><td nowrap="" valign="top"><tt>A2</tt>&nbsp; </td><td align="left">bubble capture facility; animation state in the low byte of L3 (valid range <tt>00</tt>..<tt>27</tt>)</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>A4</tt>..<tt>A6</tt>&nbsp; </td><td align="left">toffee quarry
<table>
<tbody><tr><td nowrap="" valign="top"><tt>A5</tt>&nbsp; </td><td align="left">animated part; animation state in the low byte of L3 (valid range <tt>00</tt>..<tt>45</tt>)</td></tr>
</tbody></table>
</td></tr>
<tr><td nowrap="" valign="top"><tt>A7</tt>..<tt>AE</tt>&nbsp; </td><td align="left">sugar mine
<table>
<tbody><tr><td nowrap="" valign="top"><tt>AE</tt>&nbsp; </td><td align="left">animated part; animation state in the low byte of L3 (valid range <tt>00</tt>..<tt>5F</tt>)</td></tr>
</tbody></table>
</td></tr>
<tr><td colspan="2"></td></tr> <!-- spacer -->
</tbody></table></li>
<li>L2: index into the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_IndustryArray">array of industries</a>
</li>
<li>L1 bit 7: clear = under construction
<ul>
<li>L1 bits 4..2: construction counter, for buildings under construction incremented on every periodic tile processing
</li>
</ul></li>
<li>L1 bits 1..0: stage of construction (<tt>3</tt> = completed), incremented when the construction counter wraps around
<br>the meaning is different for some animated tiles which are never under construction (types <tt>01</tt>, <tt>1E</tt>..<tt>20</tt>, <tt>30</tt>, <tt>58</tt>; see above)
</li>
</ul>
</td></tr>

<tr><td valign="top" nowrap=""><a name="Class9"><tt> 9 </tt></a></td><td>
L5 bits 7..4 clear: tunnel entrance/exit
<ul>
<li>L5 bits 3..2: <tt>0</tt> - railway tunnel, <tt>1</tt> - road tunnel</li>
<li>L5 bits 1..0 - direction: entrance towards: <tt>0</tt> = NE, <tt>1</tt> = SE, <tt>2</tt> = SW, <tt>3</tt> = NW</li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the tunnel</li>
<li>L3 bits 3..0 = <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#TrackType">track type</a> for railway tunnel, must be 0 for road tunnel</li>
<li>L3 bit 15 set = on snow or desert</li>
</ul>
L5 bit 7 set: bridge
<ul><li>
L5 bit 6 clear: bridge ending
<ul>
<li>L5 bit 5: clear - northern, set - southern ending</li>
<li>L3 bits 3..0 = <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#TrackType">type of track</a> on the bridge, must be 0 for road bridge</li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the bridge</li>
</ul>
L5 bit 6 set: bridge middle part
<ul>
<li>L5 bit 5 clear:
<ul>
<li>L5 bits 4..3: land under bridge: <tt>0</tt> - grass, snow or desert, <tt>1</tt> - water</li>
</ul>
L5 bit 5 set:
<ul>
<li>L5 bits 4..3: transport route under bridge: <tt>0</tt> - railway, <tt>1</tt> - road</li>
</ul>
</li><li>L3 bits 7..4 = <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#TrackType">type of track</a> on the bridge, must be 0 for road bridge</li>
<li>L3 bits 3..0 = <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#TrackType">type of track</a> under the bridge, if any</li>
<li>L2 bits 3..0: bridge piece (<tt>0</tt>..<tt>5</tt>)
</li><li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the land under bridge</li>
</ul></li>
<li>L5 bits 2..1: <tt>0</tt> - railway bridge, <tt>1</tt> - road bridge</li>
<li>L5 bit 0: clear - bridge in the X direction, set - bridge in the Y direction</li>
<li>L2 bits 7..4: <a name="BridgeType">bridge type</a>:
<table>
<tbody><tr><th align="left">Type&nbsp;</th><th align="left">Max. speed (mph)&nbsp;</th><th align="left">Description</th></tr>
<tr><td nowrap="" valign="top"><tt>0</tt>&nbsp; </td><td align="center">20</td><td align="left">wooden</td></tr>
<tr><td nowrap="" valign="top"><tt>1</tt>&nbsp; </td><td align="center">30</td><td align="left">concrete</td></tr>
<tr><td nowrap="" valign="top"><tt>2</tt>&nbsp; </td><td align="center">40</td><td align="left">girder, steel</td></tr>
<tr><td nowrap="" valign="top"><tt>3</tt>&nbsp; </td><td align="center">50</td><td align="left">suspension, concrete</td></tr>
<tr><td nowrap="" valign="top"><tt>4</tt>&nbsp; </td><td align="center">60</td><td align="left">suspension, steel</td></tr>
<tr><td nowrap="" valign="top"><tt>5</tt>&nbsp; </td><td align="center">70</td><td align="left">suspension, steel</td></tr>
<tr><td nowrap="" valign="top"><tt>6</tt>&nbsp; </td><td align="center">100</td><td align="left">cantilever, steel</td></tr>
<tr><td nowrap="" valign="top"><tt>7</tt>&nbsp; </td><td align="center">130</td><td align="left">cantilever, steel</td></tr>
<tr><td nowrap="" valign="top"><tt>8</tt>&nbsp; </td><td align="center">150</td><td align="left">cantilever, steel</td></tr>
<tr><td nowrap="" valign="top"><tt>9</tt>&nbsp; </td><td align="center">160</td><td align="left">girder, steel</td></tr>
<tr><td nowrap="" valign="top"><tt>A</tt>&nbsp; </td><td align="center">200</td><td align="left">tubular, steel</td></tr>
</tbody></table></li>
<li>L3 bit 15 set = on snow or desert</li>
</ul>
</td></tr>

<tr><td valign="top" nowrap=""><a name="ClassA"><tt> A </tt></a></td><td>
<ul>
<li>L5: tile type:
<table>
<tbody><tr><td nowrap="" valign="top"><tt>00</tt>&nbsp; </td><td align="left">transmitter</td></tr>
<tr><td nowrap="" valign="top"><tt>01</tt>&nbsp; </td><td align="left">lighthouse</td></tr>
<tr><td nowrap="" valign="top"><tt>02</tt>&nbsp; </td><td align="left">company statue</td></tr>
<tr><td nowrap="" valign="top"><tt>03</tt>&nbsp; </td><td align="left">company-owned land</td></tr>
<tr><td nowrap="" valign="top"><tt>80</tt>..<tt>93</tt>&nbsp; </td><td align="left">company headquarters (5 sets of 4 tiles each, updated quarterly depending on the company performance)</td></tr>
</tbody></table>
</li>
<li>L1: <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#OwnershipInfo">owner</a> of the object (for lighthouses and transmitters normally <tt>10</tt>)</li>
</ul>
</td></tr>

<tr><td colspan="2">
Classes <tt>B</tt> through <tt>F</tt> are reserved. The presence of a tile in one of the reserved classes will crash TTD.
</td></tr>
</tbody></table>

<hr>

<h2>Tips and tricks</h2>
<p>
For starters, be careful when editing TTD savegames, especially the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#Landscape">landscape data</a>. TTD savegames  are essentially decompressed straight into TTD memory, with no error checking. Illegal values are likely to crash TTD, possibly as soon as you load the game, possibly when you least expect it.
</p>

<h3>Finding the coordinates of a tile</h3>
<p>
Tile coordinates are not displayed anywhere in TTD (yet -- a future version of TTDPatch may include such feature), so unless you use some external savegame editing tool like TTDX Editor (see <a href="http://www.owenrudge.net/">Owen Rudge's website</a>) you may find it difficult to find out exactly where in the landscape arrays the tiles you'd like to edit are. Counting tiles all the way from a corner of the map can be <em>very</em> tedious...
</p>
<p>
Here is a trick you can use to find out the coordinates of tiles using only <a href="http://kufel.immt.pwr.wroc.pl/~mgrzegor/sv1tool/">SV1Codec</a> and the file compare tool <samp>fc.exe</samp>, which is a part of MS-DOS and (as far as I know) all versions of Microsoft Windows since 95 and NT 4.0:
</p>
<ol><li>
Start TTD and load the game you intend to edit.
</li><li>
Choose a tile close to the one you intend to edit (close enough that you won't have problems counting tiles from it) and start a bridge there. The bridge may be as short as 2 tiles. When the bridge type selection window appears, <em>don't select a bridge type yet</em>; pause the game.
</li><li>
Save the game under some temporary name, let's say "Test 1", preferably in some temporary directory. Just make sure you don't overwrite the original game.
</li><li>
Now use the bridge type selection window to complete building the bridge <em>while the game is still paused</em>. It doesn't matter which bridge type you select.
</li><li>
Save the game again, under a different name (let's say "Test 2"), keeping the game paused all the time.
</li><li>
Quit TTD. Use SV1Codec to uncompress both savegames. You'll get two uncompressed savegame files, "<samp>Test 1.big</samp>" and "<samp>Test 2.big</samp>" if you named the savegames as suggested above.
</li><li>
Launch the command prompt ("MS-DOS prompt" in Windows 95/98) and type:
<p><tt>
  fc /b "Test 1.big" "Test 2.big" &gt; fc.txt
</tt></p>
(You can drag and drop the 'big' files to a Windows command prompt to paste their names.) Press Enter when done.
</li><li>
If you've done all of the above correctly, you'll have a file named <samp>fc.txt</samp> which will list all the differences between the files. These will include <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#Landscape">landscape data</a>, your company's <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#company.cash">cash</a> and probably also a new <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_TextEffectArray">text effect</a>. The first, especially the ownership information in the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape1">L1 array</a>, can be used to find out the coordinates of the tiles at which the change (building of the bridge) took place. Since the bridge was built while the game was paused, other tiles will remain unchanged, and thus data locations of the changed tiles are easy to identify.
<p>
For example, if you've got 2 bytes changed between <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape1"><tt>4CBA</tt></a> and <tt>14CBA</tt>, the first one at <tt>7608</tt>, then the offset (the XY index) of the northern end of the 'test' bridge you've placed is <tt>7608 - 4CBA = 294E</tt>, therefore its coordinates are X=<tt>4E</tt>, Y=<tt>29</tt>.
</p><p>
At this point, you can remove the temporary savegames, they're no longer needed.
</p>
</li></ol>
<p>
Keep in mind that the <a href="http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_landscape3">L3 array</a> is an array of 2-byte words, not bytes, so data offsets in it are XY indices multiplied by 2.
</p>


<hr>

<h2>Closing words</h2>

<h3>Acknowledgements</h3>
Thanks go to Josef Drexler for TTDPatch and everything, to Dale McCoy for help with vehicle movement states, and to everyone else who offered useful suggestions about this document, or just e-mailed me to say how they like it. You know who you are :-)

<h3>Things to do</h3>
<ul>
<li>Missing entries, especially in the vehicle and company arrays
</li><li>More about contents of TTDPatch extra chunks
</li><li>Mark somehow fields that it's not useful to change (i.e. they're frequently reset by TTD)
</li><li>Perhaps more tips &amp; tricks? We'll see.
</li></ul>


<hr>
Copyright  2003-2006 by Marcin Grzegorczyk.<br>
Transport Tycoon and Transport Tycoon Deluxe are Copyright  by Chris Sawyer. All the other trademarks are the property of their respective owners.<br>
<address>
Last changed on 2006-02-27 by <a name="e-mail" href="mailto:mgrzegor@poczta.onet.pl">Marcin Grzegorczyk</a>.
</address>



</body></html>